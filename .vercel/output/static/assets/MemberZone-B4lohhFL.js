const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/stripeService-B3Fw_Vbj.js","assets/stripe-DOzrBqlG.js","assets/index-D6X-thcP.js","assets/react-vendor-Dq_i0H7_.js","assets/supabase-D2F8Vsqq.js","assets/index-Hq_XrwUb.css","assets/emailProvider-DDN7Y-6p.js"])))=>i.map(i=>d[i]);
import{_ as e}from"./supabase-D2F8Vsqq.js";import{d as t,j as a,a as s,h as r,F as l,o as n,U as i,n as o,p as d,s as c,m as x,q as m,Z as g,H as h,T as u,A as b,e as p,L as y,k as f,l as j,B as v,X as N,M as w,r as _,t as k,D as C,E as S,b as A,c as M,u as D,v as L,w as P,x as T,y as q,z as U,G as R,I as B,J as I,K as E,N as F,O as z}from"./index-D6X-thcP.js";import{r as H}from"./react-vendor-Dq_i0H7_.js";import{L as $,C as O,S as G,U as Y,E as V}from"./upload-Cud2G5N6.js";import{W,I as K}from"./watch-BYfp6vGJ.js";import{C as Q}from"./chevron-right-D7y0PmvL.js";import{C as Z,P as J}from"./printer-Cuyw3eg6.js";import{B as X,A as ee}from"./BackButton-Cmh5SsyM.js";import{P as te}from"./plus-DytL0S77.js";import{M as ae}from"./message-square-DUZfLLqc.js";import{C as se}from"./calendar-DkgA9nD7.js";import{G as re}from"./globe-Ct2f4xVn.js";import{R as le}from"./refresh-cw-CbFjXYGJ.js";import{T as ne}from"./trash-2-Bn70IA3x.js";import{M as ie}from"./message-circle-DbBwDAB6.js";import{S as oe,C as de}from"./share-2-CTcs3J0l.js";import{K as ce}from"./key-clGoRhS5.js";import{C as xe}from"./check-circle-BTBdlDbT.js";import{D as me}from"./dollar-sign-BxWu0EFf.js";import{X as ge}from"./x-circle-C3zAwvQt.js";import{D as he}from"./database-CSPV3aAk.js";import{G as ue}from"./gift-BhrgP279.js";import{s as be}from"./services-C4a-vviX.js";import{S as pe}from"./star-CHOto-ir.js";import{H as ye,T as fe}from"./tablet-1p2Sp6wG.js";
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=t("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),ve=t("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Ne=t("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),we=t("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),_e=t("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]),ke=t("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]),Ce=t("FolderLock",[["rect",{width:"8",height:"5",x:"14",y:"17",rx:"1",key:"19aais"}],["path",{d:"M10 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v2.5",key:"1w6v7t"}],["path",{d:"M20 17v-2a2 2 0 1 0-4 0v2",key:"pwaxnr"}]]),Se=t("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),Ae=t("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),Me=t("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),De=t("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),Le=t("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),Pe=t("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function Te({currentSection:e,onSectionChange:t,hasActiveSubscription:c=!1}){const[x,m]=H.useState(!1),g=[{title:"Main",items:[{id:"dashboard",label:"Dashboard",icon:$},{id:"ai-assistant",label:"AI Advisor",icon:s},{id:"devices",label:"Devices",icon:W}]},{title:"Support & Services",items:[{id:"support",label:"Support",icon:Se},{id:"system",label:"System",icon:Le},{id:"catalog",label:"Catalog",icon:r}]},{title:"Health & Analysis",items:[{id:"questionnaires",label:"Questionnaires",icon:Ne},{id:"reports",label:"Reports",icon:l},{id:"second-opinion",label:"Second Opinion",icon:n}]},{title:"Data & Documents",items:[{id:"medical-files",label:"Medical Files",icon:Ce},{id:"black-box",label:"Black Box",icon:Ce}]},{title:"Account",items:[{id:"referral",label:"Referral",icon:i},{id:"billing",label:"Billing",icon:O},{id:"profile",label:"Profile",icon:o},{id:"settings",label:"Settings",icon:d}]}];return a.jsx("aside",{className:"fixed left-0 top-16 bottom-0 bg-gradient-to-b from-gray-100 to-gray-50 dark:from-gray-900 dark:to-gray-950 border-r border-gray-200 dark:border-gray-800/50 transition-all duration-300 z-40 "+(x?"w-20":"w-64"),children:a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx("div",{className:"flex-1 overflow-y-auto py-6 px-3",children:g.map((s,r)=>a.jsxs("div",{className:"mb-6",children:[!x&&a.jsx("h3",{className:"px-3 mb-2 text-xs font-semibold text-gray-600 dark:text-gray-500 uppercase tracking-wider",children:s.title}),a.jsx("nav",{className:"space-y-1",children:s.items.map(s=>{if("catalog"===s.id&&!c)return null;const r=s.icon,l=e===s.id,n="catalog"===s.id;return a.jsxs("button",{onClick:()=>t(s.id),className:"w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg transition-all duration-300 "+(l?"bg-gradient-to-r from-orange-100 to-orange-50 dark:from-orange-900/30 dark:to-orange-800/20 border border-orange-300 dark:border-orange-600/30 text-orange-600 dark:text-orange-500":n?"bg-gradient-to-r from-green-100 to-green-50 dark:from-green-900/20 dark:to-green-800/10 border border-green-300 dark:border-green-600/30 text-green-600 dark:text-green-400 hover:from-green-200 hover:to-green-100 dark:hover:from-green-900/30 dark:hover:to-green-800/20":"text-gray-700 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-800/50 border border-transparent hover:border-gray-300 dark:hover:border-gray-700/50"),title:x?s.label:"",children:[a.jsx(r,{className:"h-5 w-5 flex-shrink-0 "+(l?"text-orange-600 dark:text-orange-500":n?"text-green-600 dark:text-green-400":"")}),!x&&a.jsx("span",{className:"text-sm font-medium "+(l||n?"font-semibold":""),children:s.label})]},s.id)})})]},r))}),a.jsx("div",{className:"border-t border-gray-300 dark:border-gray-800/50 p-4",children:a.jsx("button",{onClick:()=>m(!x),className:"w-full flex items-center justify-center space-x-2 px-3 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-800/50 hover:text-gray-900 dark:hover:text-gray-300 rounded-lg transition-all duration-300",children:x?a.jsx(Q,{className:"h-5 w-5"}):a.jsxs(a.Fragment,{children:[a.jsx(Z,{className:"h-5 w-5"}),a.jsx("span",{className:"text-sm",children:"Collapse"})]})})})]})})}function qe({onBack:e}={}){const[t,s]=H.useState(!0),[r,l]=H.useState(null),[n,i]=H.useState([]),[o,d]=H.useState([]),[h,u]=H.useState(null),[b,p]=H.useState(!1);async function y(){try{const{data:{user:e}}=await c.auth.getUser();if(!e)return;const t=(new Date).toISOString().split("T")[0],[a,s,r,n]=await Promise.all([c.from("daily_snapshots").select("*").eq("user_id",e.id).eq("snapshot_date",t).maybeSingle(),c.from("user_goals").select("*").eq("user_id",e.id).eq("status","active").order("priority",{ascending:!0}).limit(5),c.from("habits").select("*").eq("user_id",e.id).eq("status","active").limit(10),c.from("health_reports").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(1).maybeSingle()]);if(l(a.data),i(s.data||[]),u(n.data),r.data){const e=await Promise.all(r.data.map(async e=>{const{data:a}=await c.from("habit_completions").select("*").eq("habit_id",e.id).eq("completion_date",t).maybeSingle();return{habit:e,completion:a}}));d(e)}}catch(e){}finally{s(!1)}}return H.useEffect(()=>{y()},[]),t?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(x,{className:"h-8 w-8 text-orange-500 animate-spin"})}):a.jsxs("div",{className:"space-y-6",children:[e&&a.jsx(X,{onClick:e,label:"Back to Home"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Dashboard"}),a.jsx("p",{className:"text-gray-400",children:"Your wellness command center: today's state, goals, and habits"})]}),r?a.jsx(Ue,{snapshot:r}):a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-xl p-8 border-2 border-dashed border-gray-700/50 text-center",children:[a.jsx(m,{className:"h-12 w-12 text-orange-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Ready to see how your body is today?"}),a.jsx("p",{className:"text-gray-400 mb-6 max-w-md mx-auto",children:"Your daily snapshot will show your current state and suggest one gentle step"}),a.jsxs("button",{onClick:async function(){try{const{data:{user:e}}=await c.auth.getUser();if(!e)return;const t=(new Date).toISOString().split("T")[0],a={user_id:e.id,snapshot_date:t,state_summary:"Your body is in recovery mode",state_reason:"Sleep is supporting recovery, but your nervous system hasn't returned to normal tone yet",suggestion_of_day:{title:"2 minutes of breathing after 3 PM",description:"A short breathing practice will lower nervous system tension and support recovery",action:"breathing"},energy_level:"moderate",recovery_status:"recovering"};await c.from("daily_snapshots").upsert(a,{onConflict:"user_id,snapshot_date"}),y()}catch(e){}},className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-500 hover:to-orange-600 text-white rounded-lg font-semibold transition-all duration-300 shadow-lg shadow-orange-600/20",children:[a.jsx(g,{className:"h-5 w-5 mr-2"}),"Generate Today's Snapshot"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(Re,{goals:n,onCreateGoal:()=>p(!0)}),a.jsx(Be,{habits:o,onToggle:async function(e,t){try{const{data:{user:a}}=await c.auth.getUser();if(!a)return;const s=(new Date).toISOString().split("T")[0];t?await c.from("habit_completions").update({completed:!t.completed,completed_at:t.completed?null:(new Date).toISOString()}).eq("id",t.id):await c.from("habit_completions").insert({habit_id:e,user_id:a.id,completion_date:s,completed:!0,completed_at:(new Date).toISOString()}),y()}catch(a){}}})]}),h&&a.jsx(Ie,{report:h}),a.jsx(Ee,{}),b&&a.jsx(Fe,{onClose:()=>p(!1),onCreate:async function(e){try{const{data:{user:t}}=await c.auth.getUser();if(!t)return;const{error:a}=await c.from("user_goals").insert({user_id:t.id,title:e.title,description:e.description,priority:e.priority,status:"active",start_date:(new Date).toISOString().split("T")[0]});if(a)throw a;p(!1),y()}catch(t){alert("Failed to create goal")}}})]})}function Ue({snapshot:e}){const[t,s]=H.useState(!1),[r,l]=H.useState(!1);return a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-xl p-6 border border-gray-700/50",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(m,{className:"h-8 w-8 text-orange-500"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:"Today"}),a.jsx("p",{className:"text-sm text-gray-400",children:new Date(e.snapshot_date).toLocaleDateString("en-US",{month:"long",day:"numeric"})})]})]}),a.jsxs("div",{className:"flex space-x-4 text-sm",children:[e.energy_level&&a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-1",children:"Energy"}),a.jsx("p",{className:`font-semibold capitalize ${(e=>{switch(e){case"excellent":return"text-green-600 dark:text-green-400";case"good":return"text-blue-600 dark:text-blue-400";case"moderate":return"text-yellow-600 dark:text-yellow-400";case"low":return"text-orange-600 dark:text-orange-400";default:return"text-gray-600 dark:text-gray-400"}})(e.energy_level)}`,children:e.energy_level})]}),e.recovery_status&&a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-1",children:"Recovery"}),a.jsx("p",{className:`font-semibold capitalize ${(e=>{switch(e){case"excellent":return"text-green-600 dark:text-green-400";case"stable":return"text-blue-600 dark:text-blue-400";case"recovering":return"text-yellow-600 dark:text-yellow-400";case"stressed":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}})(e.recovery_status)}`,children:e.recovery_status})]})]})]}),a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/30 rounded-lg p-4 mb-4",children:[a.jsx("p",{className:"text-lg font-semibold text-white mb-2",children:e.state_summary}),e.state_reason&&a.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm",children:e.state_reason}),a.jsxs("button",{onClick:()=>l(!r),className:"mt-2 text-sm text-orange-500 hover:text-orange-400 font-semibold transition-colors inline-flex items-center",children:[a.jsx(K,{className:"h-4 w-4 mr-1"}),r?"Hide explanation":"Why is this happening?"]}),r&&a.jsx("div",{className:"mt-3 p-3 bg-gray-900/50 border border-gray-700/30 rounded-lg",children:a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"When your nervous system stays active during rest, your body doesn't fully switch to recovery mode. This is common after sustained effort and means gentle support is more helpful than pushing harder."})})]}),e.suggestion_of_day&&a.jsx("div",{className:"bg-gray-900/50 border border-orange-600/20 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(h,{className:"h-6 w-6 text-orange-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Today's Suggestion"}),a.jsx("p",{className:"text-sm text-gray-900 dark:text-white font-medium mb-1",children:e.suggestion_of_day.title}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.suggestion_of_day.description})]})]})}),e.second_opinion_a&&e.second_opinion_b&&a.jsxs("div",{className:"mt-4",children:[a.jsx("button",{onClick:()=>s(!t),className:"text-sm text-orange-500 hover:text-orange-400 font-semibold transition-colors",children:t?"▼ Hide second opinion":"▶ Show second opinion"}),t&&a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-3 border border-gray-700/30",children:[a.jsx("p",{className:"text-xs font-semibold text-purple-900 dark:text-purple-300 mb-1",children:"Opinion A (Physiological)"}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.second_opinion_a})]}),a.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-3 border border-gray-700/30",children:[a.jsx("p",{className:"text-xs font-semibold text-pink-900 dark:text-pink-300 mb-1",children:"Opinion B (Lifestyle)"}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.second_opinion_b})]})]})]})]})}function Re({goals:e,onCreateGoal:t}){return a.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl p-6 border border-gray-200 dark:border-gray-800",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(u,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"}),a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Active Goals"})]}),a.jsx("button",{className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-semibold transition-colors",children:"+ Add"})]}),0===e.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(u,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"No active goals yet"}),a.jsxs("button",{onClick:t,className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-semibold transition-colors",children:[a.jsx(te,{className:"h-4 w-4 mr-2"}),"Create First Goal"]})]}):a.jsx("div",{className:"space-y-3",children:e.map(e=>a.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors cursor-pointer",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:e.title}),e.description&&a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:e.description}),a.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-600 dark:text-gray-400",children:[a.jsx("span",{className:"px-2 py-1 rounded capitalize "+("high"===e.priority?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400":"medium"===e.priority?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-400":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),children:e.priority}),a.jsxs("span",{children:["Since ",new Date(e.start_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]})]}),a.jsx(Q,{className:"h-5 w-5 text-gray-400 flex-shrink-0"})]})},e.id))})]})}function Be({habits:e,onToggle:t}){const s=e.filter(e=>{var t;return null==(t=e.completion)?void 0:t.completed}).length;return a.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl p-6 border border-gray-200 dark:border-gray-800",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(b,{className:"h-6 w-6 text-green-600 dark:text-green-400"}),a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Today's Habits"})]}),e.length>0&&a.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s," / ",e.length]})]}),0===e.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(b,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Habits will appear after creating goals"})]}):a.jsx("div",{className:"space-y-2",children:e.map(({habit:e,completion:s})=>{return a.jsxs("label",{className:"flex items-start space-x-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:(null==s?void 0:s.completed)||!1,onChange:()=>t(e.id,s),className:"mt-1 h-5 w-5 text-green-600 rounded"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium "+((null==s?void 0:s.completed)?"text-gray-500 dark:text-gray-400 line-through":"text-gray-900 dark:text-white"),children:e.title}),a.jsxs("div",{className:"flex items-center space-x-3 mt-1 text-xs text-gray-600 dark:text-gray-400",children:[a.jsx("span",{children:(r=e.time_anchor,{morning:"Morning",afternoon:"Afternoon",evening:"Evening",after_meal:"After meal",before_sleep:"Before sleep",custom:"Custom"}[r]||r)}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:[e.duration_minutes," min"]})]})]}),(null==s?void 0:s.completed)&&a.jsx(p,{className:"h-5 w-5 text-green-600 dark:text-green-400 flex-shrink-0"})]},e.id);var r})}),e.length>0&&s===e.length&&a.jsx("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800 text-center",children:a.jsx("p",{className:"text-sm text-green-800 dark:text-green-300 font-semibold",children:"Excellent! All habits completed"})})]})}function Ie({report:e}){return a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-800",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(l,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Latest Report"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(e.created_at).toLocaleDateString("en-US",{month:"long",day:"numeric"})})]})]}),a.jsxs("button",{className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 font-semibold transition-colors flex items-center",children:["Open",a.jsx(Q,{className:"h-4 w-4 ml-1"})]})]}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 line-clamp-2 mb-4",children:e.summary}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[e.insights&&Array.isArray(e.insights)&&a.jsxs("span",{children:[e.insights.length," insights"]}),e.recommendations&&Array.isArray(e.recommendations)&&a.jsx("span",{children:"•"}),e.recommendations&&Array.isArray(e.recommendations)&&a.jsxs("span",{children:[e.recommendations.length," recommendations"]})]})]})}function Ee(){return a.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl p-6 border border-gray-200 dark:border-gray-800",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("button",{className:"flex flex-col items-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:[a.jsx(l,{className:"h-6 w-6 text-blue-600 dark:text-blue-400 mb-2"}),a.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Create Report"})]}),a.jsxs("button",{className:"flex flex-col items-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors",children:[a.jsx(u,{className:"h-6 w-6 text-green-600 dark:text-green-400 mb-2"}),a.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Add Goal"})]}),a.jsxs("button",{className:"flex flex-col items-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors",children:[a.jsx(ae,{className:"h-6 w-6 text-purple-600 dark:text-purple-400 mb-2"}),a.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Open Chat"})]}),a.jsxs("button",{className:"flex flex-col items-center p-4 bg-teal-50 dark:bg-teal-900/20 rounded-lg hover:bg-teal-100 dark:hover:bg-teal-900/30 transition-colors",children:[a.jsx(se,{className:"h-6 w-6 text-teal-600 dark:text-teal-400 mb-2"}),a.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"History"})]})]})]})}function Fe({onClose:e,onCreate:t}){const[s,r]=H.useState({title:"",description:"",priority:"medium"});return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl max-w-md w-full p-6 border border-gray-200 dark:border-gray-800",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Create New Goal"}),a.jsxs("form",{onSubmit:e=>{e.preventDefault(),s.title&&t(s)},className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Goal Title"}),a.jsx("input",{type:"text",value:s.title,onChange:e=>r({...s,title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Improve sleep quality",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),a.jsx("textarea",{value:s.description,onChange:e=>r({...s,description:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe your goal..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),a.jsxs("select",{value:s.priority,onChange:e=>r({...s,priority:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"high",children:"High"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"submit",className:"flex-1 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors",children:"Create Goal"}),a.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 bg-gray-200 dark:bg-gray-800 text-gray-900 dark:text-white rounded-lg hover:bg-gray-300 dark:hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})]})})}function ze(){const[e,t]=H.useState("categories"),[s,r]=H.useState({categories:{},personal_info:{},medical_history:{},medications:{},allergies:{},vital_signs:{},lifestyle:{},psychological_health:{},mens_sexual_health:{},womens_sexual_health:{}}),[l,n]=H.useState({categories:"draft",personal_info:"draft",medical_history:"draft",medications:"draft",allergies:"draft",vital_signs:"draft",lifestyle:"draft",psychological_health:"draft",mens_sexual_health:"draft",womens_sexual_health:"draft"}),[i,o]=H.useState("metric"),[d,x]=H.useState("en"),[m,g]=H.useState(!1),[h,u]=H.useState(!1),[b,f]=H.useState(!0),[j,v]=H.useState(null);H.useEffect(()=>{N()},[]);const N=async()=>{try{const{data:{user:e}}=await c.auth.getUser();if(!e)return;const{data:t,error:a}=await c.from("questionnaire_responses").select("*").eq("user_id",e.id).maybeSingle();if(a&&"PGRST116"!==a.code)return;t&&(r({categories:t.categories||{},personal_info:t.personal_info||{},medical_history:t.medical_history||{},medications:t.medications||{},allergies:t.allergies||{},vital_signs:t.vital_signs||{},lifestyle:t.lifestyle||{},psychological_health:t.psychological_health||{},mens_sexual_health:t.mens_sexual_health||{},womens_sexual_health:t.womens_sexual_health||{}}),n({categories:t.categories_status||"draft",personal_info:t.personal_info_status||"draft",medical_history:t.medical_history_status||"draft",medications:t.medications_status||"draft",allergies:t.allergies_status||"draft",vital_signs:t.vital_signs_status||"draft",lifestyle:t.lifestyle_status||"draft",psychological_health:t.psychological_health_status||"draft",mens_sexual_health:t.mens_sexual_health_status||"draft",womens_sexual_health:t.womens_sexual_health_status||"draft"}),o(t.unit_system||"metric"),x(t.language||"en"),g(t.mens_sexual_health_unlocked||!1),u(t.womens_sexual_health_unlocked||!1),v(t.last_autosave_at?new Date(t.last_autosave_at):null))}catch(e){}finally{f(!1)}},w=(e,t,a)=>{const l={...s[e],[t]:a};r(t=>({...t,[e]:l}));const i=_(e,l)?"complete":"draft";n(t=>({...t,[e]:i})),(async(e,t)=>{try{const{data:{user:a}}=await c.auth.getUser();if(!a)return;const s={[e]:t,[`${e}_status`]:_(e,t)?"complete":"draft"},{error:r}=await c.from("questionnaire_responses").upsert({user_id:a.id,...s},{onConflict:"user_id"});r||v(new Date)}catch(a){}})(e,l)},_=(e,t)=>({categories:["primary_health_areas","primary_priority"],personal_info:["full_name","biological_sex","date_of_birth","country","height","weight","primary_language"],medical_history:["has_diagnosed_conditions"],medications:["taking_medications"],allergies:["has_allergies"],vital_signs:[],lifestyle:[],psychological_health:[],mens_sexual_health:[],womens_sexual_health:[]}[e].every(e=>void 0!==t[e]&&""!==t[e]&&null!==t[e])),k=[{id:"categories",name:"Categories"},{id:"personal_info",name:"Personal Info"},{id:"medical_history",name:"Medical History"},{id:"medications",name:"Medications"},{id:"allergies",name:"Allergies"},{id:"vital_signs",name:"Vital Signs"},{id:"lifestyle",name:"Lifestyle"},{id:"psychological_health",name:"Psychological Health"},{id:"mens_sexual_health",name:"Men's Sexual Health",locked:!m},{id:"womens_sexual_health",name:"Women's Sexual Health",locked:!h}];return b?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-gray-400",children:"Loading questionnaires..."})}):a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Health Questionnaires"}),a.jsx("p",{className:"text-gray-400",children:"Complete your health profile to receive personalized recommendations and insights"})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 h-full",children:[a.jsx("div",{className:"lg:w-64 flex-shrink-0",children:a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-lg border border-gray-700/50 p-4 sticky top-4",children:[a.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-700/50",children:[a.jsx("h3",{className:"font-semibold text-white mb-3",children:"Settings"}),a.jsxs("button",{onClick:async()=>{const e="metric"===i?"imperial":"metric";o(e);const{data:{user:t}}=await c.auth.getUser();t&&await c.from("questionnaire_responses").upsert({user_id:t.id,unit_system:e},{onConflict:"user_id"})},className:"w-full flex items-center justify-between p-2 bg-gray-800/50 border border-gray-700/30 rounded-lg hover:border-orange-600/30 transition-colors mb-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Me,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-300",children:"Units"})]}),a.jsx("span",{className:"text-sm font-medium text-orange-500",children:"metric"===i?"Metric":"Imperial"})]}),a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-800/50 border border-gray-700/30 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(re,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-300",children:"Language"})]}),a.jsx("span",{className:"text-sm font-medium text-orange-500",children:d.toUpperCase()})]}),j&&a.jsxs("div",{className:"mt-3 flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-400",children:[a.jsx(G,{className:"h-3 w-3"}),a.jsxs("span",{children:["Saved ",j.toLocaleTimeString()]})]})]}),a.jsx("div",{className:"space-y-1",children:k.map(r=>{const n=l[r.id],i=(e=>{const t=s[e],a=Object.keys(t);if(0===a.length)return 0;const r=a.filter(e=>""!==t[e]&&null!==t[e]&&void 0!==t[e]).length;return Math.round(r/a.length*100)})(r.id);return a.jsxs("button",{onClick:()=>!r.locked&&t(r.id),disabled:r.locked,className:"w-full flex items-center justify-between p-3 rounded-lg transition-colors text-left "+(e===r.id?"bg-blue-100 dark:bg-blue-900/30 text-orange-500":r.locked?"bg-gray-800/50 border border-gray-700/30 text-gray-400 dark:text-gray-600 cursor-not-allowed":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-300"),children:[a.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[r.locked?a.jsx(y,{className:"h-4 w-4 flex-shrink-0"}):"complete"===n?a.jsx(p,{className:"h-4 w-4 text-green-600 dark:text-green-400 flex-shrink-0"}):a.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-current flex-shrink-0"}),a.jsx("span",{className:"text-sm font-medium truncate",children:r.name})]}),!r.locked&&i>0&&a.jsxs("span",{className:"text-xs ml-2",children:[i,"%"]})]},r.id)})})]})}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-lg border-2 border-gray-700/50 p-6",children:["categories"===e&&a.jsx(He,{data:s.categories,onChange:(e,t)=>w("categories",e,t),unitSystem:i}),"personal_info"===e&&a.jsx($e,{data:s.personal_info,onChange:(e,t)=>w("personal_info",e,t),unitSystem:i}),"medical_history"===e&&a.jsx(Oe,{data:s.medical_history,onChange:(e,t)=>w("medical_history",e,t)}),"medications"===e&&a.jsx(Ge,{data:s.medications,onChange:(e,t)=>w("medications",e,t)}),"allergies"===e&&a.jsx(Ye,{data:s.allergies,onChange:(e,t)=>w("allergies",e,t)}),"vital_signs"===e&&a.jsx(Ve,{data:s.vital_signs,onChange:(e,t)=>w("vital_signs",e,t),unitSystem:i}),"lifestyle"===e&&a.jsx(We,{data:s.lifestyle,onChange:(e,t)=>w("lifestyle",e,t)}),"psychological_health"===e&&a.jsx(Ke,{data:s.psychological_health,onChange:(e,t)=>w("psychological_health",e,t)}),"mens_sexual_health"===e&&(m?a.jsx(Qe,{data:s.mens_sexual_health,onChange:(e,t)=>w("mens_sexual_health",e,t)}):a.jsx(Je,{section:"Men's Sexual Health"})),"womens_sexual_health"===e&&(h?a.jsx(Ze,{data:s.womens_sexual_health,onChange:(e,t)=>w("womens_sexual_health",e,t)}):a.jsx(Je,{section:"Women's Sexual Health"}))]})})]})]})}function He({data:e,onChange:t}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Categories"}),a.jsx("p",{className:"text-gray-400",children:"Tell us which health areas are most important to you"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Which areas of health are most important for you right now? ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["Sleep & Recovery","Energy & Fatigue","Nutrition","Stress Management","Hormones","Prevention","Performance","Mental Wellness","Longevity"].map(s=>a.jsxs("label",{className:"flex items-center space-x-2 p-3 bg-gray-800/50 border border-gray-700/30 rounded-lg cursor-pointer hover:border-orange-600/30",children:[a.jsx("input",{type:"checkbox",checked:(e.primary_health_areas||[]).includes(s),onChange:a=>{const r=e.primary_health_areas||[];t("primary_health_areas",a.target.checked?[...r,s]:r.filter(e=>e!==s))},className:"rounded border-gray-300"}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:s})]},s))})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["What is your primary health priority? ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:e.primary_priority||"",onChange:e=>t("primary_priority",e.target.value),className:"w-full px-4 py-2 border-2 border-gray-700/50 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[a.jsx("option",{value:"",children:"Select priority..."}),a.jsx("option",{value:"prevention",children:"Prevention"}),a.jsx("option",{value:"improvement",children:"Improvement"}),a.jsx("option",{value:"maintenance",children:"Maintenance"}),a.jsx("option",{value:"recovery",children:"Recovery"})]})]})]})}function $e({data:e,onChange:t,unitSystem:s}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Personal Information"}),a.jsx("p",{className:"text-gray-400",children:"Help us personalize your experience"})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Full Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:e.full_name||"",onChange:e=>t("full_name",e.target.value),className:"w-full px-4 py-2 border-2 border-gray-700/50 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Biological Sex ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:e.biological_sex||"",onChange:e=>t("biological_sex",e.target.value),className:"w-full px-4 py-2 border-2 border-gray-700/50 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[a.jsx("option",{value:"",children:"Select..."}),a.jsx("option",{value:"male",children:"Male"}),a.jsx("option",{value:"female",children:"Female"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Date of Birth ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",value:e.date_of_birth||"",onChange:e=>t("date_of_birth",e.target.value),className:"w-full px-4 py-2 border-2 border-gray-700/50 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Country ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:e.country||"",onChange:e=>t("country",e.target.value),className:"w-full px-4 py-2 border-2 border-gray-700/50 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Height (","metric"===s?"cm":"inches",") ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",value:e.height||"",onChange:e=>t("height",e.target.value),className:"w-full px-4 py-2 border-2 border-gray-700/50 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Weight (","metric"===s?"kg":"lbs",") ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",value:e.weight||"",onChange:e=>t("weight",e.target.value),className:"w-full px-4 py-2 border-2 border-gray-700/50 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]})]})]})}function Oe({data:e,onChange:t}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Medical History"}),a.jsx("p",{className:"text-gray-400",children:"Your medical background helps us provide better insights"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Do you currently have any diagnosed medical conditions? ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"radio",checked:!0===e.has_diagnosed_conditions,onChange:()=>t("has_diagnosed_conditions",!0),className:"text-blue-600"}),a.jsx("span",{children:"Yes"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"radio",checked:!1===e.has_diagnosed_conditions,onChange:()=>t("has_diagnosed_conditions",!1),className:"text-blue-600"}),a.jsx("span",{children:"No"})]})]})]}),e.has_diagnosed_conditions&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Which conditions?"}),a.jsx("textarea",{value:e.conditions_list||"",onChange:e=>t("conditions_list",e.target.value),rows:4,className:"w-full px-4 py-2 border-2 border-gray-700/50 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"List your conditions..."})]})]})}function Ge({data:e,onChange:t}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Medications"}),a.jsx("p",{className:"text-gray-400",children:"Current medications and supplements"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Are you currently taking any prescription medications? ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"radio",checked:!0===e.taking_medications,onChange:()=>t("taking_medications",!0),className:"text-blue-600"}),a.jsx("span",{children:"Yes"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"radio",checked:!1===e.taking_medications,onChange:()=>t("taking_medications",!1),className:"text-blue-600"}),a.jsx("span",{children:"No"})]})]})]}),e.taking_medications&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"List medications"}),a.jsx("textarea",{value:e.medications_list||"",onChange:e=>t("medications_list",e.target.value),rows:4,className:"w-full px-4 py-2 border-2 border-gray-700/50 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"Medication name, dosage, frequency..."})]})]})}function Ye({data:e,onChange:t}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Allergies"}),a.jsx("p",{className:"text-gray-400",children:"Known allergies and reactions"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Do you have any known allergies? ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"radio",checked:!0===e.has_allergies,onChange:()=>t("has_allergies",!0),className:"text-blue-600"}),a.jsx("span",{children:"Yes"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"radio",checked:!1===e.has_allergies,onChange:()=>t("has_allergies",!1),className:"text-blue-600"}),a.jsx("span",{children:"No"})]})]})]}),e.has_allergies&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Describe your allergies"}),a.jsx("textarea",{value:e.allergies_list||"",onChange:e=>t("allergies_list",e.target.value),rows:4,className:"w-full px-4 py-2 border-2 border-gray-700/50 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"Type of allergy, severity, reactions..."})]})]})}function Ve({data:e,onChange:t,unitSystem:s}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Vital Signs"}),a.jsx("p",{className:"text-gray-400",children:"Recent measurements (all optional)"})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Resting Heart Rate (bpm)"}),a.jsx("input",{type:"number",value:e.resting_heart_rate||"",onChange:e=>t("resting_heart_rate",e.target.value),className:"w-full px-4 py-2 border-2 border-gray-700/50 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Blood Pressure (","mmHg",")"]}),a.jsx("input",{type:"text",value:e.blood_pressure||"",onChange:e=>t("blood_pressure",e.target.value),placeholder:"120/80",className:"w-full px-4 py-2 border-2 border-gray-700/50 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]})]})]})}function We({data:e,onChange:t}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Lifestyle"}),a.jsx("p",{className:"text-gray-400",children:"Daily habits and routines"})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Smoking Status"}),a.jsxs("select",{value:e.smoking_status||"",onChange:e=>t("smoking_status",e.target.value),className:"w-full px-4 py-2 border-2 border-gray-700/50 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[a.jsx("option",{value:"",children:"Select..."}),a.jsx("option",{value:"never",children:"Never"}),a.jsx("option",{value:"former",children:"Former"}),a.jsx("option",{value:"current",children:"Current"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Alcohol Consumption"}),a.jsxs("select",{value:e.alcohol_consumption||"",onChange:e=>t("alcohol_consumption",e.target.value),className:"w-full px-4 py-2 border-2 border-gray-700/50 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[a.jsx("option",{value:"",children:"Select..."}),a.jsx("option",{value:"none",children:"None"}),a.jsx("option",{value:"occasional",children:"Occasional"}),a.jsx("option",{value:"moderate",children:"Moderate"}),a.jsx("option",{value:"frequent",children:"Frequent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Exercise Frequency (per week)"}),a.jsx("input",{type:"number",value:e.exercise_frequency||"",onChange:e=>t("exercise_frequency",e.target.value),className:"w-full px-4 py-2 border-2 border-gray-700/50 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Sleep Duration (hours per night)"}),a.jsx("input",{type:"number",step:"0.5",value:e.sleep_duration||"",onChange:e=>t("sleep_duration",e.target.value),className:"w-full px-4 py-2 border-2 border-gray-700/50 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]})]})]})}function Ke({data:e,onChange:t}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Psychological Health"}),a.jsx("p",{className:"text-gray-400",children:"Mental and emotional wellbeing"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"How would you describe your current mood stability?"}),a.jsxs("select",{value:e.mood_stability||"",onChange:e=>t("mood_stability",e.target.value),className:"w-full px-4 py-2 border-2 border-gray-700/50 rounded-lg bg-white dark:bg-gray-900",children:[a.jsx("option",{value:"",children:"Select..."}),a.jsx("option",{value:"very_stable",children:"Very Stable"}),a.jsx("option",{value:"mostly_stable",children:"Mostly Stable"}),a.jsx("option",{value:"somewhat_variable",children:"Somewhat Variable"}),a.jsx("option",{value:"quite_variable",children:"Quite Variable"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Do you experience prolonged stress?"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"radio",checked:!0===e.prolonged_stress,onChange:()=>t("prolonged_stress",!0),className:"text-blue-600"}),a.jsx("span",{children:"Yes"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"radio",checked:!1===e.prolonged_stress,onChange:()=>t("prolonged_stress",!1),className:"text-blue-600"}),a.jsx("span",{children:"No"})]})]})]})]})}function Qe({data:e,onChange:t}){return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:a.jsxs("p",{className:"text-sm text-gray-300",children:[a.jsx("strong",{children:"Confidentiality Notice:"})," All responses are encrypted and private. This information is used only to provide personalized wellness guidance."]})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Men's Sexual Health"}),a.jsx("p",{className:"text-gray-400",children:"Supportive guidance for hormonal and sexual wellbeing"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Is your sexual interest stable, increasing, or decreasing?"}),a.jsxs("select",{value:e.sexual_interest_trend||"",onChange:e=>t("sexual_interest_trend",e.target.value),className:"w-full px-4 py-2 border-2 border-gray-700/50 rounded-lg bg-white dark:bg-gray-900",children:[a.jsx("option",{value:"",children:"Select..."}),a.jsx("option",{value:"increasing",children:"Increasing"}),a.jsx("option",{value:"stable",children:"Stable"}),a.jsx("option",{value:"decreasing",children:"Decreasing"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Do you feel confident in your sexual function?"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"radio",checked:!0===e.sexual_function_confidence,onChange:()=>t("sexual_function_confidence",!0),className:"text-blue-600"}),a.jsx("span",{children:"Yes"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"radio",checked:!1===e.sexual_function_confidence,onChange:()=>t("sexual_function_confidence",!1),className:"text-blue-600"}),a.jsx("span",{children:"No"})]})]})]})]})}function Ze({data:e,onChange:t}){return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:a.jsxs("p",{className:"text-sm text-gray-300",children:[a.jsx("strong",{children:"Confidentiality Notice:"})," All responses are encrypted and private. This information is used only to provide personalized wellness guidance."]})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Women's Sexual Health"}),a.jsx("p",{className:"text-gray-400",children:"Supportive guidance for hormonal and sexual wellbeing"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Have you noticed changes in sexual desire or interest?"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"radio",checked:!0===e.sexual_desire_changes,onChange:()=>t("sexual_desire_changes",!0),className:"text-blue-600"}),a.jsx("span",{children:"Yes"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"radio",checked:!1===e.sexual_desire_changes,onChange:()=>t("sexual_desire_changes",!1),className:"text-blue-600"}),a.jsx("span",{children:"No"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Would you like AI guidance related to hormonal support or sexual wellbeing?"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"radio",checked:!0===e.wants_hormonal_guidance,onChange:()=>t("wants_hormonal_guidance",!0),className:"text-blue-600"}),a.jsx("span",{children:"Yes"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"radio",checked:!1===e.wants_hormonal_guidance,onChange:()=>t("wants_hormonal_guidance",!1),className:"text-blue-600"}),a.jsx("span",{children:"No"})]})]})]})]})}function Je({section:e}){return a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[a.jsx(y,{className:"h-16 w-16 text-gray-400 mb-4"}),a.jsxs("h3",{className:"text-xl font-bold text-white mb-2",children:[e," Locked"]}),a.jsx("p",{className:"text-center text-gray-400 max-w-md mb-6",children:"This questionnaire becomes available only after you activate and pay for the corresponding category."}),a.jsx("button",{className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors",children:"Activate Category"})]})}function Xe(){const[e,t]=H.useState({detail_level:"standard",tone_style:"supportive",visualization_mode:"mixed",insight_focus:"lifestyle",advanced_mode_enabled:!1,advanced_mode_unlocked:!1,interpretation_priority:"preventive_first",auto_refresh_frequency:"weekly",second_opinion_default:!1,save_to_history:!0,allow_caregiver_view:!1}),[s,r]=H.useState(!0),[l,n]=H.useState(null),[i,o]=H.useState(!1);H.useEffect(()=>{x(),m()},[]);const x=async()=>{try{const{data:{user:e}}=await c.auth.getUser();if(!e)return;const{data:a,error:s}=await c.from("report_settings").select("*").eq("user_id",e.id).maybeSingle();if(s&&"PGRST116"!==s.code)return;a&&t({detail_level:a.detail_level,tone_style:a.tone_style,visualization_mode:a.visualization_mode,insight_focus:a.insight_focus,advanced_mode_enabled:a.advanced_mode_enabled,advanced_mode_unlocked:a.advanced_mode_unlocked,interpretation_priority:a.interpretation_priority,auto_refresh_frequency:a.auto_refresh_frequency,second_opinion_default:a.second_opinion_default,save_to_history:a.save_to_history,allow_caregiver_view:a.allow_caregiver_view})}catch(e){}finally{r(!1)}},m=async()=>{try{const{data:{user:t}}=await c.auth.getUser();if(!t)return;const{data:a,error:s}=await c.rpc("check_advanced_mode_prerequisites",{p_user_id:t.id});!s&&a&&(o(!0),e.advanced_mode_unlocked||g("advanced_mode_unlocked",!0))}catch(t){}},g=async(a,s)=>{try{const{data:{user:r}}=await c.auth.getUser();if(!r)return;const l={...e,[a]:s};t(l);const{error:i}=await c.from("report_settings").upsert({user_id:r.id,...l},{onConflict:"user_id"});i||n(new Date)}catch(r){}};return s?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-gray-400",children:"Loading settings..."})}):a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Report Settings"}),a.jsx("p",{className:"text-gray-400",children:"Personalize how AI-generated reports are created and displayed"})]}),l&&a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[a.jsx(G,{className:"h-4 w-4"}),a.jsxs("span",{children:["Saved ",l.toLocaleTimeString()]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-lg border border-gray-700/50 p-6",children:[a.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[a.jsx(d,{className:"h-5 w-5 text-orange-500 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:"Level of Detail"}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Choose how detailed your reports should be"})]})]}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"short",label:"Short Summary",desc:"Key points only"},{value:"standard",label:"Standard Detail",desc:"Recommended default"},{value:"extended",label:"Extended Detail",desc:"Long-form explanation"}].map(t=>a.jsxs("button",{onClick:()=>g("detail_level",t.value),className:"p-4 rounded-lg border-2 transition-all text-left "+(e.detail_level===t.value?"border-orange-500 bg-orange-900/20":"border-gray-700/50 hover:border-orange-600/40"),children:[a.jsx("div",{className:"font-medium text-white mb-1",children:t.label}),a.jsx("div",{className:"text-xs text-gray-400",children:t.desc})]},t.value))})]}),a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-lg border border-gray-700/50 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Report Tone Style"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"analytical",label:"Analytical",desc:"Data-focused, objective"},{value:"supportive",label:"Supportive",desc:"Encouraging, reassuring"},{value:"coaching",label:"Coaching",desc:"Action-oriented guidance"}].map(t=>a.jsxs("button",{onClick:()=>g("tone_style",t.value),className:"p-4 rounded-lg border-2 transition-all text-left "+(e.tone_style===t.value?"border-orange-500 bg-orange-900/20":"border-gray-700/50 hover:border-orange-600/40"),children:[a.jsx("div",{className:"font-medium text-white mb-1",children:t.label}),a.jsx("div",{className:"text-xs text-gray-400",children:t.desc})]},t.value))})]}),a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-lg border border-gray-700/50 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Visualization Preference"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"text_first",label:"Text First",desc:"Narrative-focused"},{value:"chart_first",label:"Chart First",desc:"Visual-focused"},{value:"mixed",label:"Mixed",desc:"Balanced hybrid"}].map(t=>a.jsxs("button",{onClick:()=>g("visualization_mode",t.value),className:"p-4 rounded-lg border-2 transition-all text-left "+(e.visualization_mode===t.value?"border-orange-500 bg-orange-900/20":"border-gray-700/50 hover:border-orange-600/40"),children:[a.jsx("div",{className:"font-medium text-white mb-1",children:t.label}),a.jsx("div",{className:"text-xs text-gray-400",children:t.desc})]},t.value))})]}),a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-lg border border-gray-700/50 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recommendation Focus"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"lifestyle",label:"Lifestyle Guidance",desc:"Habits and routines"},{value:"risk_awareness",label:"Risk Awareness",desc:"Prevention-focused"},{value:"performance",label:"Performance",desc:"Optimization-focused"}].map(t=>a.jsxs("button",{onClick:()=>g("insight_focus",t.value),className:"p-4 rounded-lg border-2 transition-all text-left "+(e.insight_focus===t.value?"border-orange-500 bg-orange-900/20":"border-gray-700/50 hover:border-orange-600/40"),children:[a.jsx("div",{className:"font-medium text-white mb-1",children:t.label}),a.jsx("div",{className:"text-xs text-gray-400",children:t.desc})]},t.value))})]}),a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-lg border-2 p-6 "+(e.advanced_mode_unlocked?"border-orange-600/30":"border-gray-200 dark:border-gray-700"),children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-start space-x-3",children:[e.advanced_mode_unlocked?a.jsx(Pe,{className:"h-5 w-5 text-orange-500 mt-0.5"}):a.jsx(y,{className:"h-5 w-5 text-gray-400 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:"Advanced Mode"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Deeper analytical interpretation with multi-factor correlation"})]})]}),e.advanced_mode_unlocked&&a.jsx("button",{onClick:()=>g("advanced_mode_enabled",!e.advanced_mode_enabled),className:"px-4 py-2 rounded-lg font-medium transition-colors "+(e.advanced_mode_enabled?"bg-gradient-to-r from-orange-600 to-orange-500 text-white hover:from-orange-500 hover:to-orange-600 shadow-lg shadow-orange-600/20":"bg-gray-800/50 border border-gray-700/30 text-gray-300 hover:border-orange-600/30"),children:e.advanced_mode_enabled?"Enabled":"Disabled"})]}),!e.advanced_mode_unlocked&&a.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(K,{className:"h-5 w-5 text-orange-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[a.jsx("p",{className:"font-medium mb-1",children:"Advanced Mode is locked"}),a.jsx("p",{children:"Complete enough baseline questionnaires to unlock deeper interpretations. This ensures accurate multi-factor analysis based on your complete health profile."})]})]})}),e.advanced_mode_enabled&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("h4",{className:"text-sm font-semibold text-white mb-3",children:"Interpretation Priority"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"preventive_first",label:"Preventive First"},{value:"physiological_first",label:"Physiological First"},{value:"behavioral_first",label:"Behavioral First"}].map(t=>a.jsx("button",{onClick:()=>g("interpretation_priority",t.value),className:"p-3 rounded-lg border-2 transition-all text-center text-sm "+(e.interpretation_priority===t.value?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-700/50 hover:border-orange-600/40"),children:t.label},t.value))})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-lg border border-gray-700/50 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Additional Options"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg cursor-pointer",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-white mb-1",children:"Second Opinion Default"}),a.jsx("div",{className:"text-sm text-gray-400",children:"Automatically show second interpretation for all reports"})]}),a.jsx("input",{type:"checkbox",checked:e.second_opinion_default,onChange:e=>g("second_opinion_default",e.target.checked),className:"w-5 h-5 text-blue-600 rounded"})]}),a.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg cursor-pointer",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-white mb-1",children:"Save to History"}),a.jsx("div",{className:"text-sm text-gray-400",children:"Automatically save all generated reports for later review"})]}),a.jsx("input",{type:"checkbox",checked:e.save_to_history,onChange:e=>g("save_to_history",e.target.checked),className:"w-5 h-5 text-blue-600 rounded"})]}),a.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg cursor-pointer",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-white mb-1",children:"Allow Caregiver View"}),a.jsx("div",{className:"text-sm text-gray-400",children:"Enable linked caregivers or healthcare professionals to view reports"})]}),a.jsx("input",{type:"checkbox",checked:e.allow_caregiver_view,onChange:e=>g("allow_caregiver_view",e.target.checked),className:"w-5 h-5 text-blue-600 rounded"})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-lg border border-gray-700/50 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Report Refresh Frequency"}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"How often should reports be regenerated based on new data?"}),a.jsx("div",{className:"grid grid-cols-5 gap-2",children:[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"biweekly",label:"Bi-weekly"},{value:"monthly",label:"Monthly"},{value:"manual",label:"Manual"}].map(t=>a.jsx("button",{onClick:()=>g("auto_refresh_frequency",t.value),className:"p-3 rounded-lg border-2 transition-all text-center text-sm "+(e.auto_refresh_frequency===t.value?"border-orange-500 bg-orange-900/20 font-medium":"border-gray-700/50 hover:border-orange-600/40"),children:t.label},t.value))})]}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-200 dark:border-blue-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(K,{className:"h-5 w-5 text-orange-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[a.jsx("p",{className:"font-medium mb-1",children:"All settings are automatically saved"}),a.jsx("p",{children:"Your preferences will apply to all future reports. You can change these settings at any time without re-entering questionnaires or losing data."})]})]})})]})}function et(){const[e,t]=H.useState(""),[r,l]=H.useState(!1),[n,i]=H.useState({opinion1:null,opinion2:null}),o=async()=>{e.trim()&&(l(!0),i({opinion1:null,opinion2:null}),setTimeout(()=>{i({opinion1:`AI Opinion #1 (Evidence-Based): Based on current medical research and clinical guidelines regarding "${e}", I would recommend consulting with a healthcare professional for personalized advice. This is a simulated response demonstrating the dual opinion system.`,opinion2:`AI Opinion #2 (Contextual): Taking into account your specific health profile and the question "${e}", here's a contextual perspective. This second AI model provides complementary insights. This is a simulated response for demonstration purposes.`}),l(!1)},2e3))};return a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-3",children:[a.jsx(s,{className:"h-8 w-8 text-orange-500"}),"AI Health Advisor"]}),a.jsx("p",{className:"text-gray-400",children:"Get dual AI expert opinions on your health questions for comprehensive insights"})]}),a.jsx("div",{className:"mb-6 p-4 bg-yellow-900/20 border border-yellow-600/30 rounded-xl",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(f,{className:"h-5 w-5 text-yellow-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-yellow-200 font-medium mb-1",children:"Medical Disclaimer"}),a.jsx("p",{className:"text-xs text-yellow-300/80",children:"AI responses are for informational purposes only. Always consult qualified healthcare professionals for medical advice, diagnosis, or treatment."})]})]})}),a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Ask Your Health Question"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("textarea",{value:e,onChange:e=>t(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),o())},rows:4,placeholder:"Type your health question here... (e.g., 'What are the benefits of regular exercise for heart health?')",className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500 resize-none"}),a.jsx("button",{onClick:o,disabled:!e.trim()||r,className:"w-full px-6 py-3 bg-gradient-to-r from-orange-600 to-orange-500 text-white rounded-lg hover:from-orange-500 hover:to-orange-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:r?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Analyzing with dual AI..."]}):a.jsxs(a.Fragment,{children:[a.jsx(j,{className:"h-5 w-5"}),"Get Dual AI Opinions"]})})]})]}),r&&a.jsx("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-orange-600/30 rounded-xl p-6 mb-6",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-orange-500"}),a.jsx("p",{className:"text-white font-semibold",children:"Analyzing your question with dual AI models..."})]}),a.jsxs("div",{className:"space-y-2 pl-8",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{children:"AI Model #1: Evidence-based analysis"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),a.jsx("span",{children:"AI Model #2: Contextual analysis"})]})]})]})}),!r&&n.opinion1&&n.opinion2&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(v,{className:"h-6 w-6 text-orange-500"}),"Dual AI Opinions"]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 via-blue-800/10 to-gray-900 border border-blue-600/30 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-blue-900/30 border border-blue-600/30 rounded-lg",children:a.jsx(v,{className:"h-5 w-5 text-blue-400"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-white",children:"AI Opinion #1"}),a.jsx("p",{className:"text-xs text-blue-400",children:"Evidence-Based Perspective"})]})]}),a.jsx("div",{className:"prose prose-invert prose-sm max-w-none",children:a.jsx("p",{className:"text-gray-300 whitespace-pre-wrap",children:n.opinion1})}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-blue-600/20",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-gray-500",children:"Confidence:"}),a.jsx("span",{className:"text-blue-400 font-semibold",children:"85%"})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs mt-2",children:[a.jsx("span",{className:"text-gray-500",children:"Sources:"}),a.jsx("span",{className:"text-blue-400 font-semibold",children:"Medical research"})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 via-green-800/10 to-gray-900 border border-green-600/30 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-green-900/30 border border-green-600/30 rounded-lg",children:a.jsx(v,{className:"h-5 w-5 text-green-400"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-white",children:"AI Opinion #2"}),a.jsx("p",{className:"text-xs text-green-400",children:"Contextual Perspective"})]})]}),a.jsx("div",{className:"prose prose-invert prose-sm max-w-none",children:a.jsx("p",{className:"text-gray-300 whitespace-pre-wrap",children:n.opinion2})}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-green-600/20",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-gray-500",children:"Confidence:"}),a.jsx("span",{className:"text-green-400 font-semibold",children:"78%"})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs mt-2",children:[a.jsx("span",{className:"text-gray-500",children:"Personalization:"}),a.jsx("span",{className:"text-green-400 font-semibold",children:"High"})]})]})]})]}),a.jsxs("div",{className:"mt-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl p-6",children:[a.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:"Key Insights"}),a.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-orange-500 mt-1",children:"•"}),a.jsx("span",{children:"Both AI models agree on the importance of consulting healthcare professionals"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-orange-500 mt-1",children:"•"}),a.jsx("span",{children:"Evidence-based opinion focuses on general medical guidelines"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-orange-500 mt-1",children:"•"}),a.jsx("span",{children:"Contextual opinion considers your individual health profile"})]})]}),a.jsx("button",{onClick:()=>{t(""),i({opinion1:null,opinion2:null})},className:"mt-4 px-6 py-2 bg-blue-900/30 border border-blue-600/30 text-blue-400 rounded-lg hover:bg-blue-900/50 transition-colors",children:"Ask Another Question"})]})]}),!r&&!n.opinion1&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(v,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400 mb-2",children:"No questions asked yet"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Ask a health question to get dual AI expert opinions"})]})]})}const tt=[{id:"apple_watch",name:"Apple Watch",icon:"⌚"},{id:"fitbit",name:"Fitbit",icon:"📊"},{id:"oura",name:"Oura Ring",icon:"💍"},{id:"whoop",name:"WHOOP",icon:"⚡"},{id:"garmin",name:"Garmin",icon:"🏃"},{id:"cgm",name:"CGM (Dexcom/Libre)",icon:"🩸"}];function at(){const[e,t]=H.useState([]),[s,r]=H.useState(!0),[l,n]=H.useState(!1),[i,o]=H.useState("");H.useEffect(()=>{d()},[]);const d=async()=>{try{const{data:e}=await c.auth.getUser();if(!e.user)return;const{data:a,error:s}=await c.from("device_connections").select("*").eq("user_id",e.user.id).order("connected_at",{ascending:!1});if(s)throw s;t(a||[])}catch(e){}finally{r(!1)}};return a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-3",children:[a.jsx(W,{className:"h-8 w-8 text-orange-500"}),"Connected Devices"]}),a.jsx("p",{className:"text-gray-400",children:"Connect your wearables and health sensors for automatic data synchronization"})]}),a.jsxs("div",{className:"mb-6 grid md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 via-blue-800/20 to-gray-900 border border-blue-600/30 rounded-xl p-4",children:[a.jsx(b,{className:"h-6 w-6 text-blue-400 mb-2"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:e.filter(e=>"connected"===e.status).length}),a.jsx("p",{className:"text-xs text-gray-400",children:"Active Devices"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 via-green-800/20 to-gray-900 border border-green-600/30 rounded-xl p-4",children:[a.jsx(le,{className:"h-6 w-6 text-green-400 mb-2"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:e.filter(e=>e.last_sync).length}),a.jsx("p",{className:"text-xs text-gray-400",children:"Recently Synced"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-900/30 via-orange-800/20 to-gray-900 border border-orange-600/30 rounded-xl p-4",children:[a.jsx(W,{className:"h-6 w-6 text-orange-400 mb-2"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:tt.length}),a.jsx("p",{className:"text-xs text-gray-400",children:"Supported Devices"})]})]}),a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-white",children:"Your Devices"}),a.jsxs("button",{onClick:()=>n(!0),className:"px-6 py-2 bg-gradient-to-r from-orange-600 to-orange-500 text-white rounded-lg hover:from-orange-500 hover:to-orange-600 transition-all flex items-center gap-2",children:[a.jsx(te,{className:"h-4 w-4"}),"Connect Device"]})]}),s?a.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading devices..."}):0===e.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(W,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400 mb-2",children:"No devices connected"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Connect your wearable devices to start tracking health data automatically"})]}):a.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:e.map(e=>{var t;return a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl p-6 hover:border-orange-500/30 transition-all",children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"text-3xl",children:(null==(t=tt.find(t=>t.id===e.device_type))?void 0:t.icon)||"📱"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:e.device_name}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:"connected"===e.status?a.jsxs("span",{className:"px-2 py-0.5 bg-green-900/30 border border-green-600/30 text-green-400 text-xs rounded-full flex items-center gap-1",children:[a.jsx(p,{className:"h-3 w-3"}),"Connected"]}):a.jsxs("span",{className:"px-2 py-0.5 bg-red-900/30 border border-red-600/30 text-red-400 text-xs rounded-full flex items-center gap-1",children:[a.jsx(N,{className:"h-3 w-3"}),"Disconnected"]})})]})]})}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Last Sync:"}),a.jsx("span",{className:"text-gray-300",children:e.last_sync?new Date(e.last_sync).toLocaleString():"Never"})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Frequency:"}),a.jsx("span",{className:"text-gray-300",children:e.sync_frequency})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Connected:"}),a.jsx("span",{className:"text-gray-300",children:new Date(e.connected_at).toLocaleDateString()})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>(async e=>{try{const{error:t}=await c.from("device_connections").update({last_sync:(new Date).toISOString()}).eq("id",e);if(t)throw t;d()}catch(t){}})(e.id),className:"flex-1 px-4 py-2 bg-blue-900/30 border border-blue-600/30 text-blue-400 rounded-lg hover:bg-blue-900/50 transition-colors flex items-center justify-center gap-2",children:[a.jsx(le,{className:"h-4 w-4"}),"Sync Now"]}),a.jsx("button",{onClick:()=>(async e=>{if(confirm("Disconnect this device?"))try{const{error:t}=await c.from("device_connections").delete().eq("id",e);if(t)throw t;d()}catch(t){alert("Failed to disconnect device")}})(e.id),className:"px-4 py-2 bg-red-900/30 border border-red-600/30 text-red-400 rounded-lg hover:bg-red-900/50 transition-colors",title:"Disconnect",children:a.jsx(ne,{className:"h-4 w-4"})})]})]},e.id)})}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl max-w-2xl w-full p-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Connect Device"}),a.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:tt.map(e=>a.jsxs("button",{onClick:()=>(async e=>{try{const{data:t}=await c.auth.getUser();if(!t.user)return;const a=tt.find(t=>t.id===e);if(!a)return;const{error:s}=await c.from("device_connections").insert({user_id:t.user.id,device_type:e,device_name:a.name,status:"connected",sync_frequency:"daily"});if(s)throw s;n(!1),d()}catch(t){alert("Failed to connect device")}})(e.id),className:"p-6 bg-gray-800/50 border border-gray-700/30 rounded-xl hover:bg-gray-800 hover:border-orange-500/30 transition-all text-left",children:[a.jsx("div",{className:"text-4xl mb-3",children:e.icon}),a.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:e.name}),a.jsx("p",{className:"text-sm text-gray-400",children:"Click to connect"})]},e.id))}),a.jsx("button",{onClick:()=>n(!1),className:"w-full mt-6 px-6 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})})]})}function st(){const[e,t]=H.useState([]),[s,r]=H.useState(null),[l,n]=H.useState([]),[i,o]=H.useState(""),[d,m]=H.useState(!1),[g,h]=H.useState({subject:"",category:"technical",priority:"normal",message:""});H.useEffect(()=>{u()},[]),H.useEffect(()=>{s&&b(s.id)},[s]);const u=async()=>{try{const{data:e}=await c.auth.getUser();if(!e.user)return;const{data:a,error:s}=await c.from("support_tickets").select("*").eq("user_id",e.user.id).order("updated_at",{ascending:!1});if(s)throw s;t(a||[])}catch(e){}},b=async e=>{try{const{data:t,error:a}=await c.from("support_messages").select("*").eq("ticket_id",e).order("created_at",{ascending:!0});if(a)throw a;n(t||[])}catch(t){}},p=async()=>{if(i.trim()&&s)try{const{error:e}=await c.from("support_messages").insert({ticket_id:s.id,sender_type:"user",message:i});if(e)throw e;await c.from("support_tickets").update({updated_at:(new Date).toISOString()}).eq("id",s.id),o(""),b(s.id),u()}catch(e){}},y=e=>{switch(e){case"open":return"bg-green-900/30 border-green-600/30 text-green-400";case"in_progress":return"bg-blue-900/30 border-blue-600/30 text-blue-400";default:return"bg-gray-700/30 border-gray-600/30 text-gray-400"}},f=e=>{switch(e){case"urgent":return"bg-red-900/30 border-red-600/30 text-red-400";case"high":return"bg-orange-900/30 border-orange-600/30 text-orange-400";case"normal":return"bg-blue-900/30 border-blue-600/30 text-blue-400";default:return"bg-gray-700/30 border-gray-600/30 text-gray-400"}};return a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-3",children:[a.jsx(Se,{className:"h-8 w-8 text-orange-500"}),"Support"]}),a.jsx("p",{className:"text-gray-400",children:"Get help from our support team via chat or email"})]}),a.jsxs("div",{className:"mb-6 grid md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl p-4",children:[a.jsx(ie,{className:"h-6 w-6 text-blue-400 mb-2"}),a.jsx("h3",{className:"font-semibold text-white mb-1",children:"Live Chat"}),a.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Chat with support agent in real-time"}),a.jsx("button",{className:"text-xs text-blue-400 hover:text-blue-300",children:"Start Chat →"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl p-4",children:[a.jsx(w,{className:"h-6 w-6 text-green-400 mb-2"}),a.jsx("h3",{className:"font-semibold text-white mb-1",children:"Email Support"}),a.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"support@biomathcore.com"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Response within 24 hours"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl p-4",children:[a.jsx(x,{className:"h-6 w-6 text-orange-400 mb-2"}),a.jsx("h3",{className:"font-semibold text-white mb-1",children:"Support Hours"}),a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"24/7 for Pro users"}),a.jsx("p",{className:"text-xs text-gray-400",children:"9AM-6PM EST for Basic"})]})]}),a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-white",children:"Support Tickets"}),a.jsxs("button",{onClick:()=>m(!0),className:"px-6 py-2 bg-gradient-to-r from-orange-600 to-orange-500 text-white rounded-lg hover:from-orange-500 hover:to-orange-600 transition-all flex items-center gap-2",children:[a.jsx(te,{className:"h-4 w-4"}),"New Ticket"]})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[a.jsx("div",{className:"md:col-span-1 space-y-2",children:e.map(e=>a.jsxs("div",{onClick:()=>r(e),className:"p-4 rounded-xl cursor-pointer transition-all "+((null==s?void 0:s.id)===e.id?"bg-orange-900/30 border border-orange-600/30":"bg-gray-800/50 border border-gray-700/30 hover:bg-gray-800"),children:[a.jsx("div",{className:"flex items-start justify-between mb-2",children:a.jsx("h4",{className:"text-sm font-semibold text-white line-clamp-2",children:e.subject})}),a.jsxs("div",{className:"flex gap-2 mb-2",children:[a.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full border ${y(e.status)}`,children:e.status}),a.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full border ${f(e.priority)}`,children:e.priority})]}),a.jsx("p",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]},e.id))}),a.jsx("div",{className:"md:col-span-2 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl flex flex-col h-[600px]",children:s?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 border-b border-gray-700/50",children:[a.jsx("h3",{className:"font-semibold text-white mb-2",children:s.subject}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full border ${y(s.status)}`,children:s.status}),a.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full border ${f(s.priority)}`,children:s.priority}),a.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full border bg-gray-700/30 border-gray-600/30 text-gray-400",children:s.category})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:l.map(e=>a.jsx("div",{className:"flex "+("user"===e.sender_type?"justify-end":"justify-start"),children:a.jsxs("div",{className:"max-w-[80%] p-4 rounded-xl "+("user"===e.sender_type?"bg-orange-900/30 border border-orange-600/30":"bg-gray-800/50 border border-gray-700/30"),children:[a.jsx("p",{className:"text-sm text-white whitespace-pre-wrap",children:e.message}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(e.created_at).toLocaleTimeString()})]})},e.id))}),a.jsx("div",{className:"p-4 border-t border-gray-700/50",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:i,onChange:e=>o(e.target.value),onKeyPress:e=>"Enter"===e.key&&p(),placeholder:"Type your message...",className:"flex-1 px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500"}),a.jsxs("button",{onClick:p,className:"px-6 py-2 bg-gradient-to-r from-orange-600 to-orange-500 text-white rounded-lg hover:from-orange-500 hover:to-orange-600 transition-all flex items-center gap-2",children:[a.jsx(j,{className:"h-4 w-4"}),"Send"]})]})})]}):a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ie,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400",children:"Select a ticket to view conversation"})]})})})]}),d&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl max-w-md w-full p-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Create Support Ticket"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Subject"}),a.jsx("input",{type:"text",value:g.subject,onChange:e=>h({...g,subject:e.target.value}),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Brief description of your issue"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Category"}),a.jsxs("select",{value:g.category,onChange:e=>h({...g,category:e.target.value}),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",children:[a.jsx("option",{value:"technical",children:"Technical"}),a.jsx("option",{value:"billing",children:"Billing"}),a.jsx("option",{value:"account",children:"Account"}),a.jsx("option",{value:"feature",children:"Feature Request"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Priority"}),a.jsxs("select",{value:g.priority,onChange:e=>h({...g,priority:e.target.value}),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",children:[a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"normal",children:"Normal"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Message"}),a.jsx("textarea",{value:g.message,onChange:e=>h({...g,message:e.target.value}),rows:4,className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Describe your issue in detail..."})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:async()=>{if(g.subject&&g.message)try{const{data:e}=await c.auth.getUser();if(!e.user)return;const{data:t,error:a}=await c.from("support_tickets").insert({user_id:e.user.id,subject:g.subject,category:g.category,priority:g.priority,status:"open"}).select().single();if(a)throw a;if(t){const{error:e}=await c.from("support_messages").insert({ticket_id:t.id,sender_type:"user",message:g.message});if(e)throw e}m(!1),h({subject:"",category:"technical",priority:"normal",message:""}),u()}catch(e){alert("Failed to create ticket")}else alert("Subject and message are required")},className:"flex-1 px-6 py-2 bg-gradient-to-r from-orange-600 to-orange-500 text-white rounded-lg hover:from-orange-500 hover:to-orange-600 transition-all",children:"Create Ticket"}),a.jsx("button",{onClick:()=>m(!1),className:"px-6 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})})]})}function rt(){const[e,t]=H.useState(null),[s,r]=H.useState(!0),[l,n]=H.useState(!1),[i,d]=H.useState([]),[x,m]=H.useState({key:"",value:""});H.useEffect(()=>{g()},[]);const g=async()=>{try{const{data:e}=await c.auth.getUser();if(!e.user)return;const{data:a,error:s}=await c.from("profiles").select("*").eq("id",e.user.id).maybeSingle();if(s)throw s;if(a){t(a);const e=Object.entries(a.custom_fields||{}).map(([e,t])=>({key:e,value:String(t)}));d(e)}else{const a={id:e.user.id,name:null,avatar_url:null,country:null,timezone:"UTC",locale:"en",marketing_optin:!1,custom_fields:{}};t(a)}}catch(e){const{data:a}=await c.auth.getUser();a.user&&t({id:a.user.id,name:null,avatar_url:null,country:null,timezone:"UTC",locale:"en",marketing_optin:!1,custom_fields:{}})}finally{r(!1)}};return s||!e?a.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading..."}):a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-3",children:[a.jsx(o,{className:"h-8 w-8 text-orange-500"}),"Personal Information"]}),a.jsx("p",{className:"text-gray-400",children:"Manage your profile photo and custom information fields"})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[a.jsx("div",{className:"md:col-span-1",children:a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Profile Photo"}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsxs("div",{className:"relative mb-4",children:[e.avatar_url?a.jsx("img",{src:e.avatar_url,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-orange-500/30",onError:e=>{e.target.src="",e.target.style.display="none"}}):a.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-orange-600 to-orange-500 flex items-center justify-center",children:a.jsx(o,{className:"h-16 w-16 text-white"})}),a.jsx("input",{type:"file",id:"avatar-upload",accept:"image/*",onChange:async a=>{var s;const r=null==(s=a.target.files)?void 0:s[0];if(r)if(r.size>5242880)alert("File size must be less than 5MB");else if(r.type.startsWith("image/"))try{const{data:a}=await c.auth.getUser();if(!a.user)return void alert("Please sign in to upload photos");const s=r.name.split(".").pop(),l=`avatars/${`${a.user.id}-${Date.now()}.${s}`}`,{data:n,error:i}=await c.storage.from("profiles").upload(l,r,{cacheControl:"3600",upsert:!0});if(i)return void alert("Storage upload is not available right now. Please paste an image URL in the field below instead.");const o=`${void 0}/storage/v1/object/public/profiles/${l}`;t({...e,avatar_url:o}),alert("Photo uploaded successfully!")}catch(l){alert("Upload failed. Please paste an image URL in the field below instead.")}else alert("Please upload an image file")},className:"hidden"}),a.jsx("label",{htmlFor:"avatar-upload",className:"absolute bottom-0 right-0 p-2 bg-orange-600 rounded-full hover:bg-orange-700 transition-colors cursor-pointer",children:a.jsx(ve,{className:"h-4 w-4 text-white"})})]}),a.jsx("input",{type:"text",value:e.avatar_url||"",onChange:a=>t({...e,avatar_url:a.target.value}),placeholder:"Enter image URL",className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500"}),a.jsxs("div",{className:"text-xs text-gray-400 mt-2 text-center space-y-1",children:[a.jsx("p",{className:"font-medium text-gray-300",children:"Two ways to add photo:"}),a.jsx("p",{children:"1. Click camera icon to upload file (max 5MB)"}),a.jsx("p",{children:"2. Paste image URL in the field above"})]})]})]})}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Basic Information"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Full Name"}),a.jsx("input",{type:"text",value:e.name||"",onChange:a=>t({...e,name:a.target.value}),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"John Doe"})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Country"}),a.jsx("input",{type:"text",value:e.country||"",onChange:a=>t({...e,country:a.target.value}),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"United States"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Timezone"}),a.jsxs("select",{value:e.timezone||"UTC",onChange:a=>t({...e,timezone:a.target.value}),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",children:[a.jsx("option",{value:"UTC",children:"UTC"}),a.jsx("option",{value:"America/New_York",children:"Eastern Time"}),a.jsx("option",{value:"America/Chicago",children:"Central Time"}),a.jsx("option",{value:"America/Denver",children:"Mountain Time"}),a.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time"}),a.jsx("option",{value:"Europe/London",children:"London"}),a.jsx("option",{value:"Europe/Paris",children:"Paris"}),a.jsx("option",{value:"Asia/Tokyo",children:"Tokyo"})]})]})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.marketing_optin,onChange:a=>t({...e,marketing_optin:a.target.checked}),className:"w-4 h-4 rounded border-gray-600 text-orange-500 focus:ring-orange-500"}),a.jsx("span",{className:"text-sm text-gray-300",children:"I want to receive health tips and product updates"})]})})]})]}),a.jsxs("div",{className:"mt-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Custom Information Fields"}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Add any additional information you consider important for your health profile"}),a.jsx("div",{className:"space-y-3 mb-4",children:i.map((e,t)=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:e.key,onChange:e=>{const a=[...i];a[t].key=e.target.value,d(a)},className:"flex-1 px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Field name (e.g., Blood Type)"}),a.jsx("input",{type:"text",value:e.value,onChange:e=>{const a=[...i];a[t].value=e.target.value,d(a)},className:"flex-1 px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Value (e.g., O+)"}),a.jsx("button",{onClick:()=>(e=>{d(i.filter((t,a)=>a!==e))})(t),className:"p-2 bg-red-900/30 border border-red-600/30 text-red-400 rounded-lg hover:bg-red-900/50 transition-colors",children:a.jsx(ne,{className:"h-5 w-5"})})]},t))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:x.key,onChange:e=>m({...x,key:e.target.value}),className:"flex-1 px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"New field name"}),a.jsx("input",{type:"text",value:x.value,onChange:e=>m({...x,value:e.target.value}),className:"flex-1 px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Value"}),a.jsxs("button",{onClick:()=>{x.key&&x.value&&(d([...i,{...x}]),m({key:"",value:""}))},className:"px-4 py-2 bg-blue-900/30 border border-blue-600/30 text-blue-400 rounded-lg hover:bg-blue-900/50 transition-colors flex items-center gap-2",children:[a.jsx(te,{className:"h-5 w-5"}),"Add"]})]})]})]})]}),a.jsx("div",{className:"mt-6 flex justify-end",children:a.jsxs("button",{onClick:async()=>{if(e){n(!0);try{const t=i.reduce((e,t)=>(t.key&&(e[t.key]=t.value),e),{}),{error:a}=await c.from("profiles").upsert({id:e.id,name:e.name,country:e.country,timezone:e.timezone,locale:e.locale,marketing_optin:e.marketing_optin,custom_fields:t,avatar_url:e.avatar_url});if(a)throw a;alert("Profile updated successfully!")}catch(t){alert("Failed to save profile")}finally{n(!1)}}},disabled:l,className:"px-8 py-3 bg-gradient-to-r from-orange-600 to-orange-500 text-white rounded-lg hover:from-orange-500 hover:to-orange-600 transition-all disabled:opacity-50 flex items-center gap-2",children:[a.jsx(G,{className:"h-5 w-5"}),l?"Saving...":"Save Changes"]})})]})}const lt=["Lab Results","X-Ray","MRI","CT Scan","Prescription","Report","Other"],nt=["pdf","image","document","video","dicom"];function it(){const[e,t]=H.useState([]),[s,r]=H.useState(!0),[n,i]=H.useState(!1),[o,d]=H.useState(""),[x,m]=H.useState("all"),[g,h]=H.useState({file_name:"",file_url:"",file_type:"pdf",category:"Lab Results",tags:""});H.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:e}=await c.auth.getUser();if(!e.user)return;const{data:a,error:s}=await c.from("medical_files").select("*").eq("user_id",e.user.id).order("upload_date",{ascending:!1});if(s)throw s;t(a||[])}catch(e){}finally{r(!1)}},b=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]},p=e=>{switch(e){case"image":return a.jsx(_e,{className:"h-5 w-5"});case"video":return a.jsx(ke,{className:"h-5 w-5"});default:return a.jsx(l,{className:"h-5 w-5"})}},y=e.filter(e=>{const t=e.file_name.toLowerCase().includes(o.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(o.toLowerCase())),a="all"===x||e.category===x;return t&&a});return a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-3",children:[a.jsx(l,{className:"h-8 w-8 text-orange-500"}),"Medical Files & Documents"]}),a.jsx("p",{className:"text-gray-400",children:"Store and manage your medical records, test results, and health documents securely"})]}),a.jsx("div",{className:"mb-6 p-4 bg-yellow-900/20 border border-yellow-600/30 rounded-xl",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(_,{className:"h-5 w-5 text-yellow-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-yellow-200 font-medium mb-1",children:"Important Legal Notice"}),a.jsx("p",{className:"text-xs text-yellow-300/80",children:"Only store legal medical documents relevant to health services. You are fully responsible for the content of your files and any legal consequences related to storing personal health information. Ensure compliance with local regulations (HIPAA, GDPR, etc.)."})]})]})}),a.jsxs("div",{className:"mb-6 flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search files by name or tags...",value:o,onChange:e=>d(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("select",{value:x,onChange:e=>m(e.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",children:[a.jsx("option",{value:"all",children:"All Categories"}),lt.map(e=>a.jsx("option",{value:e,children:e},e))]}),a.jsxs("button",{onClick:()=>i(!0),className:"px-6 py-3 bg-gradient-to-r from-orange-600 to-orange-500 text-white rounded-lg hover:from-orange-500 hover:to-orange-600 transition-all flex items-center gap-2",children:[a.jsx(Y,{className:"h-5 w-5"}),"Upload File"]})]})]}),s?a.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading files..."}):0===y.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(l,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400 mb-2",children:"No medical files uploaded yet"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Upload your lab results, scans, and medical documents to get started"})]}):a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(e=>a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl p-4 hover:border-orange-500/30 transition-all",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("div",{className:"p-2 bg-orange-900/30 border border-orange-600/30 rounded-lg",children:p(e.file_type)}),a.jsx("span",{className:"px-2 py-1 bg-blue-900/30 border border-blue-600/30 text-blue-400 text-xs rounded-full",children:e.category})]}),a.jsx("h3",{className:"text-sm font-semibold text-white mb-2 line-clamp-2",children:e.file_name}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-3",children:[a.jsx("span",{children:b(e.file_size)}),a.jsx("span",{children:"•"}),a.jsx("span",{children:new Date(e.upload_date).toLocaleDateString()})]}),e.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:e.tags.map((e,t)=>a.jsx("span",{className:"px-2 py-0.5 bg-gray-700/30 text-gray-400 text-xs rounded",children:e},t))}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsx("button",{onClick:()=>(e=>{window.open(e.file_url,"_blank")})(e),className:"p-2 bg-gray-800/50 hover:bg-gray-800 rounded-lg transition-colors flex items-center justify-center",title:"Download",children:a.jsx(C,{className:"h-4 w-4 text-blue-400"})}),a.jsx("button",{onClick:()=>(e=>{alert(`Share functionality: In production, this would generate a secure share link for "${e.file_name}"`)})(e),className:"p-2 bg-gray-800/50 hover:bg-gray-800 rounded-lg transition-colors flex items-center justify-center",title:"Share",children:a.jsx(oe,{className:"h-4 w-4 text-green-400"})}),a.jsx("button",{onClick:()=>(e=>{window.open(e.file_url,"_blank")})(e),className:"p-2 bg-gray-800/50 hover:bg-gray-800 rounded-lg transition-colors flex items-center justify-center",title:"Print",children:a.jsx(J,{className:"h-4 w-4 text-purple-400"})}),a.jsx("button",{onClick:()=>(e=>{navigator.clipboard.writeText(e.file_url),alert("File URL copied to clipboard")})(e),className:"p-2 bg-gray-800/50 hover:bg-gray-800 rounded-lg transition-colors flex items-center justify-center",title:"Copy URL",children:a.jsx(de,{className:"h-4 w-4 text-yellow-400"})}),a.jsx("button",{onClick:()=>window.open(e.file_url,"_blank"),className:"p-2 bg-gray-800/50 hover:bg-gray-800 rounded-lg transition-colors flex items-center justify-center",title:"View",children:a.jsx(S,{className:"h-4 w-4 text-orange-400"})}),a.jsx("button",{onClick:()=>(async e=>{if(confirm("Delete this file? This action cannot be undone."))try{const{error:t}=await c.from("medical_files").delete().eq("id",e);if(t)throw t;u()}catch(t){alert("Failed to delete file")}})(e.id),className:"p-2 bg-gray-800/50 hover:bg-red-900/30 rounded-lg transition-colors flex items-center justify-center",title:"Delete",children:a.jsx(ne,{className:"h-4 w-4 text-red-400"})})]})]},e.id))}),n&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl max-w-md w-full p-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Upload Medical File"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"File Name"}),a.jsx("input",{type:"text",value:g.file_name,onChange:e=>h({...g,file_name:e.target.value}),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Blood Test Results - Jan 2024"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"File URL"}),a.jsx("input",{type:"text",value:g.file_url,onChange:e=>h({...g,file_url:e.target.value}),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"https://example.com/file.pdf"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Category"}),a.jsx("select",{value:g.category,onChange:e=>h({...g,category:e.target.value}),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",children:lt.map(e=>a.jsx("option",{value:e,children:e},e))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"File Type"}),a.jsx("select",{value:g.file_type,onChange:e=>h({...g,file_type:e.target.value}),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",children:nt.map(e=>a.jsx("option",{value:e,children:e.toUpperCase()},e))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Tags (comma-separated)"}),a.jsx("input",{type:"text",value:g.tags,onChange:e=>h({...g,tags:e.target.value}),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"blood, cholesterol, 2024"})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:async()=>{if(g.file_name&&g.file_url)try{const{data:e}=await c.auth.getUser();if(!e.user)return;const t=g.tags.split(",").map(e=>e.trim()).filter(e=>e),{error:a}=await c.from("medical_files").insert({user_id:e.user.id,file_name:g.file_name,file_url:g.file_url,file_type:g.file_type,file_size:0,category:g.category,tags:t});if(a)throw a;i(!1),h({file_name:"",file_url:"",file_type:"pdf",category:"Lab Results",tags:""}),u()}catch(e){alert("Failed to upload file")}else alert("File name and URL are required")},className:"flex-1 px-6 py-2 bg-gradient-to-r from-orange-600 to-orange-500 text-white rounded-lg hover:from-orange-500 hover:to-orange-600 transition-all",children:"Upload"}),a.jsx("button",{onClick:()=>i(!1),className:"px-6 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})})]})}function ot(){const[e,t]=H.useState([]),[s,r]=H.useState(!0),[n,i]=H.useState(!1),[o,d]=H.useState({totalFiles:0,totalSize:0,lastAccess:null,accessCount:0});H.useEffect(()=>{x()},[]);const x=async()=>{try{const{data:e}=await c.auth.getUser();if(!e.user)return;const{data:a,error:s}=await c.from("black_box_files").select("*").eq("user_id",e.user.id).order("upload_date",{ascending:!1});if(s)throw s;const r=a||[];t(r);const l=r.reduce((e,t)=>e+t.file_size,0),n=r.flatMap(e=>e.access_log||[]),i=r.map(e=>e.last_accessed).filter(Boolean).sort().reverse()[0];d({totalFiles:r.length,totalSize:l,lastAccess:i,accessCount:n.length})}catch(e){}finally{r(!1)}},m=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]};return a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-3",children:[a.jsx(y,{className:"h-8 w-8 text-orange-500"}),"Black Box Storage"]}),a.jsx("p",{className:"text-gray-400",children:"Military-grade encrypted storage for your most sensitive health data"})]}),a.jsx("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-600/30 rounded-xl",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(_,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-red-200 font-medium mb-1",children:"Critical Legal Responsibility"}),a.jsx("p",{className:"text-xs text-red-300/80 mb-2",children:"You are FULLY RESPONSIBLE for all content stored in your Black Box. Only store legal information relevant to health services. Any illegal content will result in immediate account termination and legal action. All access is logged and monitored for compliance."}),a.jsx("p",{className:"text-xs text-red-300/80",children:"By using Black Box Storage, you acknowledge full legal responsibility for your data and agree to comply with all applicable laws (HIPAA, GDPR, local regulations)."})]})]})}),a.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 via-blue-800/20 to-gray-900 border border-blue-600/30 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(A,{className:"h-5 w-5 text-blue-400"}),a.jsx("span",{className:"text-xs text-blue-400 font-medium",children:"ENCRYPTED"})]}),a.jsx("p",{className:"text-2xl font-bold text-white",children:o.totalFiles}),a.jsx("p",{className:"text-xs text-gray-400",children:"Secured Files"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 via-green-800/20 to-gray-900 border border-green-600/30 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(ce,{className:"h-5 w-5 text-green-400"}),a.jsx("span",{className:"text-xs text-green-400 font-medium",children:"AES-256"})]}),a.jsx("p",{className:"text-2xl font-bold text-white",children:m(o.totalSize)}),a.jsx("p",{className:"text-xs text-gray-400",children:"Total Storage"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-900/30 via-orange-800/20 to-gray-900 border border-orange-600/30 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(b,{className:"h-5 w-5 text-orange-400"}),a.jsx("span",{className:"text-xs text-orange-400 font-medium",children:"MONITORED"})]}),a.jsx("p",{className:"text-2xl font-bold text-white",children:o.accessCount}),a.jsx("p",{className:"text-xs text-gray-400",children:"Access Logs"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 via-purple-800/20 to-gray-900 border border-purple-600/30 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(y,{className:"h-5 w-5 text-purple-400"}),a.jsx("span",{className:"text-xs text-purple-400 font-medium",children:"SECURE"})]}),a.jsx("p",{className:"text-sm font-bold text-white truncate",children:o.lastAccess?new Date(o.lastAccess).toLocaleDateString():"Never"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Last Access"})]})]}),a.jsxs("div",{className:"mb-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(A,{className:"h-5 w-5 text-orange-500"}),"Security Features"]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 bg-green-900/30 border border-green-600/30 rounded-lg flex-shrink-0",children:a.jsx(ce,{className:"h-4 w-4 text-green-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-white",children:"AES-256-GCM Encryption"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Military-grade encryption for all files"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-900/30 border border-blue-600/30 rounded-lg flex-shrink-0",children:a.jsx(b,{className:"h-4 w-4 text-blue-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-white",children:"Tamper-Proof Audit Logs"}),a.jsx("p",{className:"text-xs text-gray-400",children:"All access is recorded and immutable"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 bg-orange-900/30 border border-orange-600/30 rounded-lg flex-shrink-0",children:a.jsx(y,{className:"h-4 w-4 text-orange-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-white",children:"Zero-Knowledge Architecture"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Only you can decrypt your files"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 bg-purple-900/30 border border-purple-600/30 rounded-lg flex-shrink-0",children:a.jsx(A,{className:"h-4 w-4 text-purple-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-white",children:"Biometric Access Control"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Multi-factor authentication required"})]})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-white",children:"Encrypted Files"}),a.jsxs("button",{onClick:()=>i(!0),className:"px-6 py-2 bg-gradient-to-r from-orange-600 to-orange-500 text-white rounded-lg hover:from-orange-500 hover:to-orange-600 transition-all flex items-center gap-2",children:[a.jsx(Y,{className:"h-4 w-4"}),"Upload to Black Box"]})]}),s?a.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading secure storage..."}):0===e.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(y,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400 mb-2",children:"Black Box is empty"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Upload your most sensitive health data for maximum security"})]}):a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>{var t;return a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-orange-600/30 rounded-xl p-4 hover:border-orange-500/50 transition-all",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("div",{className:"p-2 bg-orange-900/30 border border-orange-600/30 rounded-lg",children:a.jsx(l,{className:"h-5 w-5 text-orange-400"})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(y,{className:"h-3 w-3 text-green-500"}),a.jsx("span",{className:"text-xs text-green-400 font-medium",children:"ENCRYPTED"})]})]}),a.jsx("h3",{className:"text-sm font-semibold text-white mb-2 line-clamp-2",children:e.file_name}),a.jsxs("div",{className:"space-y-2 mb-3",children:[a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-500",children:"Encryption:"}),a.jsx("span",{className:"text-green-400 font-mono",children:e.encryption_method})]}),a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-500",children:"Size:"}),a.jsx("span",{className:"text-gray-400",children:m(e.file_size)})]}),a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-500",children:"Uploaded:"}),a.jsx("span",{className:"text-gray-400",children:new Date(e.upload_date).toLocaleDateString()})]}),e.last_accessed&&a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-500",children:"Last Access:"}),a.jsx("span",{className:"text-orange-400",children:new Date(e.last_accessed).toLocaleDateString()})]}),a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-500",children:"Access Logs:"}),a.jsxs("span",{className:"text-blue-400",children:[(null==(t=e.access_log)?void 0:t.length)||0," entries"]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>(async e=>{try{const t={timestamp:(new Date).toISOString(),action:"view",ip:"xxx.xxx.xxx.xxx"},a=[...e.access_log||[],t],{error:s}=await c.from("black_box_files").update({last_accessed:(new Date).toISOString(),access_log:a}).eq("id",e.id);if(s)throw s;window.open(e.file_url,"_blank"),x()}catch(t){}})(e),className:"flex-1 p-2 bg-green-900/30 hover:bg-green-900/50 border border-green-600/30 rounded-lg transition-colors flex items-center justify-center gap-2",children:[a.jsx(S,{className:"h-4 w-4 text-green-400"}),a.jsx("span",{className:"text-xs text-green-400",children:"Access"})]}),a.jsx("button",{onClick:()=>(async e=>{if(confirm("Delete this file from Black Box? This action cannot be undone and will be logged."))try{const{error:t}=await c.from("black_box_files").delete().eq("id",e);if(t)throw t;x()}catch(t){alert("Failed to delete file")}})(e.id),className:"p-2 bg-red-900/30 hover:bg-red-900/50 border border-red-600/30 rounded-lg transition-colors",title:"Delete",children:a.jsx(ne,{className:"h-4 w-4 text-red-400"})})]})]},e.id)})}),n&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-orange-600/50 rounded-xl max-w-md w-full p-6",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(y,{className:"h-6 w-6 text-orange-500"}),"Upload to Black Box"]}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Files will be encrypted with AES-256-GCM before storage"}),a.jsx("p",{className:"text-xs text-orange-300 mb-4 p-3 bg-orange-900/20 border border-orange-600/30 rounded-lg",children:"By uploading, you confirm this content is legal and compliant with all regulations"}),a.jsx("button",{onClick:()=>i(!1),className:"w-full px-6 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Close"})]})})]})}function dt(){const[e,t]=H.useState({question:"",context:""}),[s,r]=H.useState("idle");return a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-3",children:[a.jsx(n,{className:"h-8 w-8 text-orange-500"}),"AI Health Second Opinion"]}),a.jsx("p",{className:"text-gray-400",children:"Get dual AI expert opinions on your health questions"})]}),a.jsxs("div",{className:"mb-6 grid md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 via-blue-800/20 to-gray-900 border border-blue-600/30 rounded-xl p-4",children:[a.jsx(l,{className:"h-6 w-6 text-blue-400 mb-2"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:"2"}),a.jsx("p",{className:"text-xs text-gray-400",children:"AI Models"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 via-green-800/20 to-gray-900 border border-green-600/30 rounded-xl p-4",children:[a.jsx(xe,{className:"h-6 w-6 text-green-400 mb-2"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:"Evidence-Based"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Research Backed"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-900/30 via-orange-800/20 to-gray-900 border border-orange-600/30 rounded-xl p-4",children:[a.jsx(x,{className:"h-6 w-6 text-orange-400 mb-2"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:"~2 min"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Analysis Time"})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Submit Your Question"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Health Question"}),a.jsx("textarea",{value:e.question,onChange:a=>t({...e,question:a.target.value}),rows:3,className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"What health question do you need a second opinion on?"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Medical Context (Optional)"}),a.jsx("textarea",{value:e.context,onChange:a=>t({...e,context:a.target.value}),rows:3,className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Provide any relevant medical history, test results, or current medications..."})]}),a.jsxs("button",{onClick:()=>{r("processing"),setTimeout(()=>r("ready"),2e3)},disabled:!e.question||"processing"===s,className:"px-6 py-3 bg-gradient-to-r from-orange-600 to-orange-500 text-white rounded-lg hover:from-orange-500 hover:to-orange-600 transition-all disabled:opacity-50 flex items-center gap-2",children:[a.jsx(j,{className:"h-5 w-5"}),"processing"===s?"Analyzing...":"Get Second Opinion"]})]})]}),"processing"===s&&a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-orange-600/30 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-orange-500"}),a.jsx("p",{className:"text-white font-semibold",children:"Analyzing with dual AI models..."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[a.jsx(xe,{className:"h-4 w-4 text-green-500"}),a.jsx("span",{children:"Model 1: Evidence-based analysis"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[a.jsx(x,{className:"h-4 w-4 text-orange-500 animate-pulse"}),a.jsx("span",{children:"Model 2: Contextual analysis"})]})]})]}),"ready"===s&&a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 via-blue-800/10 to-gray-900 border border-blue-600/30 rounded-xl p-6",children:[a.jsxs("h4",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[a.jsx(l,{className:"h-5 w-5 text-blue-400"}),"Opinion #1: Evidence-Based"]}),a.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Based on current medical research and clinical guidelines, this is a simulated response. In production, this would connect to an actual AI model to provide evidence-based health guidance."}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Confidence: 85%"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Sources: 12 medical papers"})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 via-green-800/10 to-gray-900 border border-green-600/30 rounded-xl p-6",children:[a.jsxs("h4",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[a.jsx(l,{className:"h-5 w-5 text-green-400"}),"Opinion #2: Contextual"]}),a.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Considering your specific context and medical history, this is a simulated contextual response. Production version would analyze your complete health profile for personalized guidance."}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Confidence: 78%"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Personalization: High"})]})]})]}),a.jsx("div",{className:"mt-6 p-4 bg-yellow-900/20 border border-yellow-600/30 rounded-xl",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(f,{className:"h-5 w-5 text-yellow-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-yellow-200 font-medium mb-1",children:"Medical Disclaimer"}),a.jsx("p",{className:"text-xs text-yellow-300/80",children:"AI opinions are for informational purposes only. Always consult with qualified healthcare professionals for medical advice, diagnosis, or treatment. Do not use AI opinions as a substitute for professional medical care."})]})]})})]})}function ct(){const[t,r]=H.useState([]),[l,n]=H.useState(null),[i,o]=H.useState(null),[d,m]=H.useState(null),[h,u]=H.useState(""),[b,p]=H.useState("all"),[y,j]=H.useState(!0),[v,N]=H.useState(0);H.useEffect(()=>{w()},[]);const w=async()=>{try{j(!0);const{data:{user:e}}=await c.auth.getUser();if(!e)return;const{data:t}=await c.from("user_subscriptions").select("*").eq("user_id",e.id).in("status",["active","trial","past_due"]).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(n(t),t){const{data:e}=await c.from("subscription_plans").select("*").eq("id",t.plan_id).single();o(e)}const{data:a}=await c.from("subscription_invoices").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});r(a||[]);const s=(a||[]).filter(e=>"paid"===e.status).reduce((e,t)=>e+t.amount,0);N(s),m({reportsUsed:(null==t?void 0:t.reports_used_this_period)||0,reportsLimit:(null==planData?void 0:planData.max_reports_per_month)||-1,devicesConnected:2,storageUsed:2.4,storageLimit:10})}catch(e){}finally{j(!1)}},_=t.filter(e=>{const t=e.invoice_number.toLowerCase().includes(h.toLowerCase())||e.plan_name.toLowerCase().includes(h.toLowerCase()),a="all"===b||e.status===b;return t&&a}),S=e=>{switch(e){case"paid":return"bg-green-900/30 border-green-600/30 text-green-400";case"pending":return"bg-yellow-900/30 border-yellow-600/30 text-yellow-400";case"failed":return"bg-red-900/30 border-red-600/30 text-red-400";default:return"bg-gray-700/30 border-gray-600/30 text-gray-400"}},D=e=>{switch(e){case"paid":return a.jsx(xe,{className:"h-4 w-4"});case"pending":return a.jsx(x,{className:"h-4 w-4"});case"failed":return a.jsx(ge,{className:"h-4 w-4"});default:return a.jsx(f,{className:"h-4 w-4"})}},L=e=>`$${(e/100).toFixed(2)}`,P=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),T=(e,t)=>-1===t?0:Math.min(e/t*100,100),q=async()=>{try{const{createPortalSession:t}=await e(async()=>{const{createPortalSession:e}=await import("./stripeService-B3Fw_Vbj.js");return{createPortalSession:e}},__vite__mapDeps([0,1,2,3,4,5])),a=await t();window.open(a,"_blank")}catch(t){alert("Unable to open billing portal. Please make sure you have an active subscription.")}},U=()=>{window.location.href="#/pricing"};return y?a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange-500"})}):a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-3",children:[a.jsx(O,{className:"h-8 w-8 text-orange-500"}),"Billing & Subscription"]}),a.jsx("p",{className:"text-gray-400",children:"Manage your subscription, update payment methods, and view your complete payment history"})]}),!l&&a.jsxs("div",{className:"mb-6 bg-blue-500/10 border border-blue-500/30 rounded-xl p-4 flex items-start gap-3",children:[a.jsx(Info,{className:"h-5 w-5 text-blue-400 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-semibold mb-1",children:"No Active Subscription"}),a.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"You don't have an active subscription yet. Choose a plan to unlock all features and start your health journey!"}),a.jsx("button",{onClick:U,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-semibold transition-all",children:"View Plans & Pricing"})]})]}),a.jsx("div",{className:"mb-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-2xl p-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-6",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`bg-gradient-to-br ${(e=>{switch(e.toLowerCase()){case"core":return"from-orange-900/30 via-orange-800/20 border-orange-600/30 text-orange-400";case"daily":return"from-blue-900/30 via-blue-800/20 border-blue-600/30 text-blue-400";case"max":return"from-purple-900/30 via-purple-800/20 border-purple-600/30 text-purple-400";default:return"from-gray-900/30 via-gray-800/20 border-gray-600/30 text-gray-400"}})((null==l?void 0:l.plan_id)||"")} to-gray-900 border rounded-xl p-4`,children:(e=>{switch(e.toLowerCase()){case"core":return a.jsx(A,{className:"h-8 w-8"});case"daily":return a.jsx(g,{className:"h-8 w-8"});case"max":return a.jsx(s,{className:"h-8 w-8"});default:return a.jsx(O,{className:"h-8 w-8"})}})((null==l?void 0:l.plan_id)||"")}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:(null==i?void 0:i.name)||"No Plan"}),(null==l?void 0:l.is_trial)&&a.jsx("span",{className:"px-3 py-1 bg-blue-500/20 border border-blue-500/50 text-blue-400 text-xs font-semibold rounded-full",children:"Trial"}),(null==l?void 0:l.cancel_at_period_end)&&a.jsx("span",{className:"px-3 py-1 bg-red-500/20 border border-red-500/50 text-red-400 text-xs font-semibold rounded-full",children:"Canceling"})]}),a.jsxs("p",{className:"text-gray-400 mb-1",children:[L("annual"===(null==l?void 0:l.billing_period)?(null==i?void 0:i.annual_price_cents)||0:(null==i?void 0:i.monthly_price_cents)||0),"/",(null==l?void 0:l.billing_period)||"month"]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["active"===(null==l?void 0:l.status)?"Active since ":"Status: ",l?P(l.current_period_start):"N/A"]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("button",{onClick:U,className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white rounded-lg font-semibold transition-all flex items-center gap-2 group",title:"View all available plans and upgrade to access more features",children:[a.jsx(je,{className:"h-4 w-4 group-hover:translate-x-0.5 group-hover:-translate-y-0.5 transition-transform"}),"Upgrade Plan"]}),a.jsxs("button",{onClick:q,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-semibold transition-all flex items-center gap-2 group",title:"Update payment method, view invoices, or cancel subscription",children:[a.jsx(V,{className:"h-4 w-4 group-hover:translate-x-0.5 group-hover:-translate-y-0.5 transition-transform"}),"Manage Billing"]})]})]})}),a.jsxs("div",{className:"mb-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 via-green-800/20 to-gray-900 border border-green-600/30 rounded-xl p-4 cursor-help",title:"Your next automatic payment date",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(se,{className:"h-5 w-5 text-green-400"}),a.jsxs("span",{className:"text-xs text-green-400 font-semibold",children:[(()=>{if(!l)return 0;const e=new Date,t=new Date(l.current_period_end).getTime()-e.getTime();return Math.ceil(t/864e5)})()," days away"]})]}),a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Next Billing Date"}),a.jsx("p",{className:"text-lg font-bold text-white",children:l?P(l.current_period_end):"No subscription"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:l?`${L("annual"===(null==l?void 0:l.billing_period)?(null==i?void 0:i.annual_price_cents)||0:(null==i?void 0:i.monthly_price_cents)||0)} will be charged`:"Select a plan to start"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 via-blue-800/20 to-gray-900 border border-blue-600/30 rounded-xl p-4 cursor-help",title:"Total amount you've paid since joining",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(me,{className:"h-5 w-5 text-blue-400"}),a.jsx(M,{className:"h-4 w-4 text-blue-400"})]}),a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Total Paid (Lifetime)"}),a.jsxs("p",{className:"text-lg font-bold text-white",children:["$",v.toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[t.filter(e=>"paid"===e.status).length," successful payment",1!==t.filter(e=>"paid"===e.status).length?"s":""]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 via-purple-800/20 to-gray-900 border border-purple-600/30 rounded-xl p-4 cursor-help",title:"Number of health reports generated this billing period",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(le,{className:"h-5 w-5 text-purple-400"}),a.jsx("span",{className:"text-xs text-purple-400 font-semibold",children:-1===(null==d?void 0:d.reportsLimit)?"Unlimited":`${null==d?void 0:d.reportsUsed}/${null==d?void 0:d.reportsLimit}`})]}),a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Reports This Month"}),a.jsx("p",{className:"text-lg font-bold text-white",children:(null==d?void 0:d.reportsUsed)||0}),d&&-1!==d.reportsLimit?a.jsx("div",{className:"mt-2 bg-gray-800 rounded-full h-1.5",children:a.jsx("div",{className:"bg-purple-500 h-1.5 rounded-full transition-all",style:{width:`${T(d.reportsUsed,d.reportsLimit)}%`}})}):a.jsx("p",{className:"text-xs text-purple-400 mt-1",children:"∞ Generate unlimited reports"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-900/30 via-orange-800/20 to-gray-900 border border-orange-600/30 rounded-xl p-4 cursor-help",title:"Storage space used for your health data and files",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(O,{className:"h-5 w-5 text-orange-400"}),a.jsxs("span",{className:"text-xs text-orange-400 font-semibold",children:[null==d?void 0:d.storageUsed,"GB / ",null==d?void 0:d.storageLimit,"GB"]})]}),a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Storage Used"}),a.jsxs("p",{className:"text-lg font-bold text-white",children:[(null==d?void 0:d.storageUsed)||0," GB"]}),d&&a.jsx("div",{className:"mt-2 bg-gray-800 rounded-full h-1.5",children:a.jsx("div",{className:"bg-orange-500 h-1.5 rounded-full transition-all",style:{width:`${T(d.storageUsed,d.storageLimit)}%`}})}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:d?`${(d.storageLimit-d.storageUsed).toFixed(1)} GB remaining`:"N/A"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(x,{className:"h-5 w-5 text-orange-500"}),"Payment History"]}),a.jsxs("div",{className:"mb-4 flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search invoices...",value:h,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),a.jsxs("select",{value:b,onChange:e=>p(e.target.value),className:"px-4 py-3 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"paid",children:"Paid"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"failed",children:"Failed"})]})]}),a.jsx("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-800/50 border-b border-gray-700/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Invoice"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Plan"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Amount"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-700/50",children:0===_.length?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(f,{className:"h-12 w-12 text-gray-600"}),a.jsx("p",{children:"No invoices found"})]})})}):_.map(e=>a.jsxs("tr",{className:"hover:bg-gray-800/30 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-white",children:e.invoice_number}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:e.plan_name}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white font-semibold",children:["$",e.amount.toFixed(2)]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:`px-2 py-1 text-xs rounded-full border flex items-center gap-1 w-fit ${S(e.status)}`,children:[D(e.status),e.status]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:P(e.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsxs("button",{className:"text-orange-400 hover:text-orange-300 flex items-center gap-1 transition-colors",children:[a.jsx(C,{className:"h-4 w-4"}),"PDF"]})})]},e.id))})]})})})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[a.jsx(g,{className:"h-5 w-5 text-orange-500"}),"Quick Actions"]}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Manage your subscription and billing with these quick shortcuts"})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsxs("button",{onClick:U,className:"p-4 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl hover:border-orange-500/50 transition-all text-left group",title:"Browse all available plans",children:[a.jsx(je,{className:"h-6 w-6 text-orange-400 mb-2 group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform"}),a.jsx("h3",{className:"text-white font-semibold mb-1",children:"Upgrade Plan"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Get access to more features and higher limits"})]}),a.jsxs("button",{onClick:q,className:"p-4 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl hover:border-blue-500/50 transition-all text-left group",title:"Manage via Stripe Customer Portal",children:[a.jsx(le,{className:"h-6 w-6 text-blue-400 mb-2 group-hover:rotate-180 transition-transform duration-500"}),a.jsx("h3",{className:"text-white font-semibold mb-1",children:"Change Billing Cycle"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Switch between monthly and annual billing (save 17%)"})]}),a.jsxs("button",{onClick:q,className:"p-4 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl hover:border-purple-500/50 transition-all text-left group",title:"Opens Stripe portal in new tab",children:[a.jsx(V,{className:"h-6 w-6 text-purple-400 mb-2 group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform"}),a.jsx("h3",{className:"text-white font-semibold mb-1",children:"Payment Methods"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Update your credit card and billing information"})]})]})]})}function xt(){const[e,t]=H.useState([{id:1,name:"AI Health Advisor",status:"running",uptime:"99.8%",load:23},{id:2,name:"Data Sync Engine",status:"running",uptime:"99.9%",load:45},{id:3,name:"Report Generator",status:"running",uptime:"98.5%",load:67},{id:4,name:"Device Integration",status:"running",uptime:"99.2%",load:34},{id:5,name:"Analytics Pipeline",status:"running",uptime:"99.7%",load:56}]),[s,r]=H.useState({totalRequests:12453,activeConnections:142,avgResponseTime:127,errorRate:.02});return H.useEffect(()=>{const e=setInterval(()=>{t(e=>e.map(e=>({...e,load:Math.max(10,Math.min(90,e.load+10*(Math.random()-.5)))}))),r(e=>({totalRequests:e.totalRequests+Math.floor(10*Math.random()),activeConnections:Math.max(100,e.activeConnections+Math.floor(20*(Math.random()-.5))),avgResponseTime:Math.max(50,Math.min(200,e.avgResponseTime+20*(Math.random()-.5))),errorRate:Math.max(0,Math.min(1,e.errorRate+.01*(Math.random()-.5)))}))},2e3);return()=>clearInterval(e)},[]),a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-3",children:[a.jsx(Le,{className:"h-8 w-8 text-orange-500"}),"System"]}),a.jsx("p",{className:"text-gray-400",children:"Monitor live system processes and performance metrics"})]}),a.jsxs("div",{className:"mb-6 grid md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 via-blue-800/20 to-gray-900 border border-blue-600/30 rounded-xl p-4",children:[a.jsx(b,{className:"h-6 w-6 text-blue-400 mb-2"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:s.totalRequests.toLocaleString()}),a.jsx("p",{className:"text-xs text-gray-400",children:"Total Requests"}),a.jsxs("div",{className:"mt-2 text-xs text-green-400",children:["+",Math.floor(50*Math.random())," / min"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 via-green-800/20 to-gray-900 border border-green-600/30 rounded-xl p-4",children:[a.jsx(De,{className:"h-6 w-6 text-green-400 mb-2"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:s.activeConnections}),a.jsx("p",{className:"text-xs text-gray-400",children:"Active Connections"}),a.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Real-time"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-900/30 via-orange-800/20 to-gray-900 border border-orange-600/30 rounded-xl p-4",children:[a.jsx(x,{className:"h-6 w-6 text-orange-400 mb-2"}),a.jsxs("p",{className:"text-2xl font-bold text-white",children:[s.avgResponseTime,"ms"]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Avg Response Time"}),a.jsx("div",{className:"mt-2 text-xs text-green-400",children:"Optimal"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 via-purple-800/20 to-gray-900 border border-purple-600/30 rounded-xl p-4",children:[a.jsx(g,{className:"h-6 w-6 text-purple-400 mb-2"}),a.jsxs("p",{className:"text-2xl font-bold text-white",children:[(100*s.errorRate).toFixed(2),"%"]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Error Rate"}),a.jsx("div",{className:"mt-2 text-xs text-green-400",children:"Healthy"})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[a.jsx(he,{className:"h-5 w-5 text-orange-500"}),"Live System Processes"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-sm text-gray-400",children:"Monitoring"})]})]}),a.jsx("div",{className:"space-y-3",children:e.map(e=>a.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/30 rounded-lg p-4 hover:border-orange-500/30 transition-all",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg "+("running"===e.status?"bg-green-900/30 border border-green-600/30":"bg-red-900/30 border border-red-600/30"),children:"running"===e.status?a.jsx(xe,{className:"h-4 w-4 text-green-400"}):a.jsx(f,{className:"h-4 w-4 text-red-400"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-white",children:e.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Uptime: ",e.uptime]})]})]}),a.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("running"===e.status?"bg-green-900/30 border border-green-600/30 text-green-400":"bg-red-900/30 border border-red-600/30 text-red-400"),children:e.status})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-1 text-xs",children:[a.jsx("span",{className:"text-gray-400",children:"Load"}),a.jsxs("span",{className:"text-white font-mono",children:[Math.round(e.load),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-700/50 rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full transition-all duration-500 "+(e.load>70?"bg-red-500":e.load>50?"bg-orange-500":"bg-green-500"),style:{width:`${e.load}%`}})})]})]},e.id))})]}),a.jsxs("div",{className:"mt-6 grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"API Keys"}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Manage API keys for third-party integrations"}),a.jsx("button",{className:"w-full px-4 py-2 bg-blue-900/30 border border-blue-600/30 text-blue-400 rounded-lg hover:bg-blue-900/50 transition-colors",children:"Manage API Keys"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Data Export"}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Export your health data in various formats"}),a.jsx("button",{className:"w-full px-4 py-2 bg-green-900/30 border border-green-600/30 text-green-400 rounded-lg hover:bg-green-900/50 transition-colors",children:"Export Data"})]})]})]})}function mt(){const[e,t]=H.useState(""),[s,r]=H.useState([]),[l,n]=H.useState({total:0,pending:0,completed:0,earnings:0});H.useEffect(()=>{d(),o()},[]);const o=async()=>{const{data:e}=await c.auth.getUser();e.user&&t(`BMC-${e.user.id.substring(0,8).toUpperCase()}`)},d=async()=>{try{const{data:e}=await c.auth.getUser();if(!e.user)return;const{data:t,error:a}=await c.from("referral_activities").select("*").eq("referrer_id",e.user.id).order("created_at",{ascending:!1});if(a)throw a;const s=t||[];r(s),n({total:s.length,pending:s.filter(e=>"pending"===e.status).length,completed:s.filter(e=>"completed"===e.status).length,earnings:s.reduce((e,t)=>e+(t.reward_credited?t.reward_amount:0),0)})}catch(e){}};return a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-3",children:[a.jsx(i,{className:"h-8 w-8 text-orange-500"}),"Referral Program"]}),a.jsx("p",{className:"text-gray-400",children:"Invite friends and earn rewards for each successful referral"})]}),a.jsxs("div",{className:"mb-6 grid md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 via-blue-800/20 to-gray-900 border border-blue-600/30 rounded-xl p-4",children:[a.jsx(i,{className:"h-6 w-6 text-blue-400 mb-2"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:l.total}),a.jsx("p",{className:"text-xs text-gray-400",children:"Total Referrals"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/30 via-yellow-800/20 to-gray-900 border border-yellow-600/30 rounded-xl p-4",children:[a.jsx(M,{className:"h-6 w-6 text-yellow-400 mb-2"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:l.pending}),a.jsx("p",{className:"text-xs text-gray-400",children:"Pending"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 via-green-800/20 to-gray-900 border border-green-600/30 rounded-xl p-4",children:[a.jsx(ue,{className:"h-6 w-6 text-green-400 mb-2"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:l.completed}),a.jsx("p",{className:"text-xs text-gray-400",children:"Completed"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-900/30 via-orange-800/20 to-gray-900 border border-orange-600/30 rounded-xl p-4",children:[a.jsx(me,{className:"h-6 w-6 text-orange-400 mb-2"}),a.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",l.earnings]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Total Earned"})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl p-6 mb-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Your Referral Code"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"flex-1 px-4 py-3 bg-gray-800/50 border border-gray-700/50 rounded-lg font-mono text-xl text-orange-500 font-bold text-center",children:e||"Loading..."}),a.jsxs("button",{onClick:()=>{const t=`https://biomathcore.com/signup?ref=${e}`;navigator.clipboard.writeText(t),alert("Referral link copied to clipboard!")},className:"px-6 py-3 bg-blue-900/30 border border-blue-600/30 text-blue-400 rounded-lg hover:bg-blue-900/50 transition-colors flex items-center gap-2",children:[a.jsx(de,{className:"h-5 w-5"}),"Copy Link"]}),a.jsxs("button",{onClick:()=>{const t=`I'm inviting you to join BiomathCore! Use my referral code ${e} to get $20 credit on signup. https://biomathcore.com/signup?ref=${e}`;window.location.href=`mailto:?subject=${encodeURIComponent("Join BiomathCore - Get $20 Credit")}&body=${encodeURIComponent(t)}`},className:"px-6 py-3 bg-green-900/30 border border-green-600/30 text-green-400 rounded-lg hover:bg-green-900/50 transition-colors flex items-center gap-2",children:[a.jsx(w,{className:"h-5 w-5"}),"Email"]})]}),a.jsx("p",{className:"text-sm text-gray-400 mt-4",children:"Share your code with friends. When they sign up and make their first purchase, you both get $20 credit!"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Referral History"}),0===s.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(i,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400 mb-2",children:"No referrals yet"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Start inviting friends to earn rewards!"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-800/50 border-b border-gray-700/50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Email"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Status"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Reward"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Date"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-700/50",children:s.map(e=>a.jsxs("tr",{className:"hover:bg-gray-800/30",children:[a.jsx("td",{className:"px-4 py-3 text-sm text-white",children:e.referred_email}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:"px-2 py-1 text-xs rounded-full "+("completed"===e.status?"bg-green-900/30 text-green-400":"pending"===e.status?"bg-yellow-900/30 text-yellow-400":"bg-gray-700/30 text-gray-400"),children:e.status})}),a.jsxs("td",{className:"px-4 py-3 text-sm text-white font-semibold",children:["$",e.reward_amount]}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]})})]})]})}function gt(){const[e,t]=H.useState([]),[s,r]=H.useState(!0),[n,i]=H.useState("all");H.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:e}=await c.auth.getUser();if(!e.user)return;const{data:a,error:s}=await c.from("health_reports").select("*").eq("user_id",e.user.id).order("created_at",{ascending:!1});if(s)throw s;t(a||[])}catch(e){}finally{r(!1)}},d="all"===n?e:e.filter(e=>e.report_type===n),m=e=>{switch(e){case"completed":return"bg-green-900/30 border-green-600/30 text-green-400";case"processing":return"bg-blue-900/30 border-blue-600/30 text-blue-400";case"pending":return"bg-yellow-900/30 border-yellow-600/30 text-yellow-400";default:return"bg-gray-700/30 border-gray-600/30 text-gray-400"}};return a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-3",children:[a.jsx(l,{className:"h-8 w-8 text-orange-500"}),"My Reports"]}),a.jsx("p",{className:"text-gray-400",children:"Access and manage all your AI-generated health reports and analyses"})]}),a.jsxs("div",{className:"mb-6 grid md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 via-blue-800/20 to-gray-900 border border-blue-600/30 rounded-xl p-4",children:[a.jsx(l,{className:"h-6 w-6 text-blue-400 mb-2"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:e.length}),a.jsx("p",{className:"text-xs text-gray-400",children:"Total Reports"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 via-green-800/20 to-gray-900 border border-green-600/30 rounded-xl p-4",children:[a.jsx(x,{className:"h-6 w-6 text-green-400 mb-2"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:e.filter(e=>"completed"===e.status).length}),a.jsx("p",{className:"text-xs text-gray-400",children:"Completed"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-900/30 via-orange-800/20 to-gray-900 border border-orange-600/30 rounded-xl p-4",children:[a.jsx(x,{className:"h-6 w-6 text-orange-400 mb-2"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:e.filter(e=>"processing"===e.status).length}),a.jsx("p",{className:"text-xs text-gray-400",children:"Processing"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 via-purple-800/20 to-gray-900 border border-purple-600/30 rounded-xl p-4",children:[a.jsx(l,{className:"h-6 w-6 text-purple-400 mb-2"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:e[0]?new Date(e[0].created_at).toLocaleDateString():"N/A"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Latest Report"})]})]}),a.jsxs("div",{className:"mb-6 flex flex-col md:flex-row gap-4 justify-between",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>i("all"),className:"px-4 py-2 rounded-lg transition-colors "+("all"===n?"bg-orange-600 text-white":"bg-gray-800/50 text-gray-400 hover:bg-gray-800"),children:"All Reports"}),a.jsx("button",{onClick:()=>i("comprehensive"),className:"px-4 py-2 rounded-lg transition-colors "+("comprehensive"===n?"bg-orange-600 text-white":"bg-gray-800/50 text-gray-400 hover:bg-gray-800"),children:"Comprehensive"}),a.jsx("button",{onClick:()=>i("focused"),className:"px-4 py-2 rounded-lg transition-colors "+("focused"===n?"bg-orange-600 text-white":"bg-gray-800/50 text-gray-400 hover:bg-gray-800"),children:"Focused"})]}),a.jsxs("button",{onClick:()=>alert("Generate New Report: This will redirect to the Reports generation page."),className:"px-6 py-2 bg-gradient-to-r from-orange-600 to-orange-500 text-white rounded-lg hover:from-orange-500 hover:to-orange-600 transition-all flex items-center gap-2",children:[a.jsx(te,{className:"h-5 w-5"}),"Generate New Report"]})]}),s?a.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading reports..."}):0===d.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(l,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400 mb-2",children:"No reports found"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Generate your first AI health report to get started"})]}):a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(e=>a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-xl p-6 hover:border-orange-500/30 transition-all cursor-pointer",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsx("div",{className:"p-2 bg-orange-900/30 border border-orange-600/30 rounded-lg",children:a.jsx(l,{className:"h-5 w-5 text-orange-400"})}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full border ${m(e.status)}`,children:e.status})]}),a.jsx("h3",{className:"text-lg font-semibold text-white mb-2 line-clamp-2",children:e.report_title}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Type:"}),a.jsx("span",{className:"text-gray-300 capitalize",children:e.report_type})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Generated:"}),a.jsx("span",{className:"text-gray-300",children:new Date(e.created_at).toLocaleDateString()})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>alert(`Viewing report: ${e.report_title}`),className:"flex-1 p-2 bg-blue-900/30 border border-blue-600/30 text-blue-400 rounded-lg hover:bg-blue-900/50 transition-colors flex items-center justify-center gap-2",children:[a.jsx(S,{className:"h-4 w-4"}),"View"]}),a.jsx("button",{onClick:()=>alert(`Downloading report: ${e.report_title}`),className:"p-2 bg-green-900/30 border border-green-600/30 text-green-400 rounded-lg hover:bg-green-900/50 transition-colors",children:a.jsx(C,{className:"h-4 w-4"})})]})]},e.id))})]})}const ht={Heart:h,Brain:v,Users:i,Activity:b,Moon:F,Shield:A,Apple:E,Leaf:I,Eye:S,Tablet:fe,Hourglass:ye,Dumbbell:B,Flower2:R,User:o,Droplets:U,HeartHandshake:q,Smartphone:T,Fingerprint:P,Target:u,Blend:L},ut={"critical-health":{bg:"bg-orange-500/10",text:"text-orange-400",border:"border-orange-500/30",icon:"text-orange-400"},"everyday-wellness":{bg:"bg-green-500/10",text:"text-green-400",border:"border-green-500/30",icon:"text-green-400"},longevity:{bg:"bg-pink-500/10",text:"text-pink-400",border:"border-pink-500/30",icon:"text-pink-400"},"mental-wellness":{bg:"bg-cyan-500/10",text:"text-cyan-400",border:"border-cyan-500/30",icon:"text-cyan-400"},"fitness-performance":{bg:"bg-yellow-500/10",text:"text-yellow-400",border:"border-yellow-500/30",icon:"text-yellow-400"},"womens-health":{bg:"bg-pink-500/10",text:"text-pink-400",border:"border-pink-500/30",icon:"text-pink-400"},"mens-health":{bg:"bg-blue-500/10",text:"text-blue-400",border:"border-blue-500/30",icon:"text-blue-400"},"beauty-skincare":{bg:"bg-pink-500/10",text:"text-pink-400",border:"border-pink-500/30",icon:"text-pink-400"},"nutrition-diet":{bg:"bg-green-500/10",text:"text-green-400",border:"border-green-500/30",icon:"text-green-400"},"sleep-recovery":{bg:"bg-indigo-500/10",text:"text-indigo-400",border:"border-indigo-500/30",icon:"text-indigo-400"},"environmental-health":{bg:"bg-teal-500/10",text:"text-teal-400",border:"border-teal-500/30",icon:"text-teal-400"},"family-health":{bg:"bg-orange-500/10",text:"text-orange-400",border:"border-orange-500/30",icon:"text-orange-400"},"preventive-medicine":{bg:"bg-cyan-500/10",text:"text-cyan-400",border:"border-cyan-500/30",icon:"text-cyan-400"},biohacking:{bg:"bg-blue-500/10",text:"text-blue-400",border:"border-blue-500/30",icon:"text-blue-400"},"senior-care":{bg:"bg-slate-500/10",text:"text-slate-300",border:"border-slate-500/30",icon:"text-slate-300"},"eye-health":{bg:"bg-blue-500/10",text:"text-blue-400",border:"border-blue-500/30",icon:"text-blue-400"},"digital-therapeutics":{bg:"bg-indigo-500/10",text:"text-indigo-400",border:"border-indigo-500/30",icon:"text-indigo-400"},"general-sexual":{bg:"bg-red-500/10",text:"text-red-400",border:"border-red-500/30",icon:"text-red-400"},"mens-sexual-health":{bg:"bg-blue-500/10",text:"text-blue-400",border:"border-blue-500/30",icon:"text-blue-400"},"womens-sexual-health":{bg:"bg-pink-500/10",text:"text-pink-400",border:"border-pink-500/30",icon:"text-pink-400"}};function bt({onSectionChange:e}){const[t,s]=H.useState(new Set),[r,l]=H.useState([]),[n,i]=H.useState(!0),[o,d]=H.useState(null),[x,m]=H.useState(null),[g,h]=H.useState(!1);H.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:{user:e}}=await c.auth.getUser(),{data:t}=await c.from("subscription_plans").select("*").order("tier_level");if(t&&l(t),e){const{data:t}=await c.from("user_subscriptions").select("*").eq("user_id",e.id).maybeSingle();d(t)}}catch(e){}finally{i(!1)}},y=(e,t)=>{m({type:e,message:t}),setTimeout(()=>m(null),5e3)},f=e=>{const a=new Set(t);a.has(e)?a.delete(e):a.add(e),s(a)},j=t.size;let v="Free",w=0,_=0;0===j?(v="Free",w=0,_=0):j<=3?(v="Core",w=1900,_=j/3*33):j<=10?(v="Daily",w=3900,_=33+(j-3)/7*33):(v="Max",w=7900,_=66+(j-10)/10*34),_=Math.min(100,_);const k=e=>"Core"===e?"from-orange-500 to-orange-600":"Daily"===e?"from-blue-500 to-blue-600":"Max"===e?"from-slate-700 to-slate-800":"from-gray-500 to-gray-600";return a.jsxs("div",{className:"space-y-8",children:[x&&a.jsx("div",{className:"fixed top-20 right-6 z-50 p-4 rounded-lg border-2 shadow-lg animate-in slide-in-from-right "+("success"===x.type?"bg-green-500/10 border-green-500/50 text-green-400":"bg-red-500/10 border-red-500/50 text-red-400"),children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(xe,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:x.message})]})}),a.jsxs("section",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-5xl font-bold text-white mb-4",children:"Build Your Health Plan"}),a.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto mb-2",children:"Choose from 20 comprehensive health categories and 200+ AI-powered services"}),a.jsx("p",{className:"text-gray-400",children:"Start with any 3 categories for just $19/month"})]}),a.jsxs("div",{className:"group relative bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-2xl p-6 hover:border-orange-600/50 transition-all duration-500 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-900/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Your Plan Calculator"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Watch your plan evolve as you select categories"})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-4xl font-bold bg-gradient-to-r from-orange-400 to-orange-600 bg-clip-text text-transparent",children:["$",(w/100).toFixed(0)]}),a.jsx("div",{className:"text-xs text-gray-500",children:"per month"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-xs font-medium text-gray-400",children:[j," of 20 categories selected"]}),j>0&&a.jsx("button",{onClick:()=>s(new Set),className:"text-xs px-3 py-1.5 bg-red-500/30 hover:bg-red-500/50 text-red-300 font-semibold rounded-md border border-red-500/50 transition-all hover:scale-105 shadow-sm",children:"Clear All"})]}),a.jsxs("span",{className:"text-xs font-bold "+("Free"===v?"text-gray-500":"bg-gradient-to-r "+k(v)+" bg-clip-text text-transparent"),children:[v," Plan"]})]}),a.jsxs("div",{className:"relative h-4 bg-gray-800 rounded-full overflow-hidden shadow-inner",children:[a.jsx("div",{className:`absolute inset-y-0 left-0 bg-gradient-to-r ${k(v)} transition-all duration-500 ease-out shadow-lg`,style:{width:`${_}%`}}),a.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-3 text-[10px] font-bold",children:[a.jsx("span",{className:j>0?"text-white drop-shadow-lg":"text-gray-600",children:"Core"}),a.jsx("span",{className:j>3?"text-white drop-shadow-lg":"text-gray-600",children:"Daily"}),a.jsx("span",{className:j>10?"text-white drop-shadow-lg":"text-gray-600",children:"Max"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-5",children:[a.jsxs("div",{className:"group/card relative bg-gradient-to-b from-gray-800/50 to-gray-900/50 border-2 rounded-lg p-3 transition-all duration-300 overflow-hidden "+(j<=3&&j>0?"border-orange-500 shadow-lg shadow-orange-500/20":"border-gray-700/40 hover:border-orange-600/40"),children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-900/0 to-orange-900/5 opacity-0 group-hover/card:opacity-100 transition-opacity"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg flex items-center justify-center mx-auto mb-2 group-hover/card:shadow-lg group-hover/card:shadow-orange-600/30 transition-all",children:a.jsx(pe,{className:"h-5 w-5 text-white"})}),a.jsx("h3",{className:"text-center font-bold text-base mb-0.5 "+(j<=3&&j>0?"text-orange-400":"text-white"),children:"Core"}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xl font-bold mb-0.5 "+(j<=3&&j>0?"text-white":"text-gray-400"),children:"$19"}),a.jsx("p",{className:"text-[10px] text-gray-500 mb-2",children:"per month"}),a.jsxs("div",{className:"space-y-0.5",children:[a.jsxs("div",{className:"flex items-center justify-center gap-1 text-[9px] text-gray-400",children:[a.jsx(xe,{className:"w-2.5 h-2.5 text-orange-600 flex-shrink-0"}),a.jsx("span",{children:"Any 3 categories"})]}),a.jsxs("div",{className:"flex items-center justify-center gap-1 text-[9px] text-gray-400",children:[a.jsx(xe,{className:"w-2.5 h-2.5 text-orange-600 flex-shrink-0"}),a.jsx("span",{children:"Basic AI insights"})]})]})]})]})]}),a.jsxs("div",{className:"group/card relative bg-gradient-to-b from-gray-800/50 to-gray-900/50 border-2 rounded-lg p-3 transition-all duration-300 overflow-hidden "+(j>3&&j<=10?"border-blue-500 shadow-lg shadow-blue-500/20":"border-gray-700/40 hover:border-blue-600/40"),children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-900/0 to-blue-900/5 opacity-0 group-hover/card:opacity-100 transition-opacity"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mx-auto mb-2 group-hover/card:shadow-lg group-hover/card:shadow-blue-600/30 transition-all",children:a.jsx(Ae,{className:"h-5 w-5 text-white"})}),a.jsx("h3",{className:"text-center font-bold text-base mb-0.5 "+(j>3&&j<=10?"text-blue-400":"text-white"),children:"Daily"}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xl font-bold mb-0.5 "+(j>3&&j<=10?"text-white":"text-gray-400"),children:"$39"}),a.jsx("p",{className:"text-[10px] text-gray-500 mb-2",children:"per month"}),a.jsxs("div",{className:"space-y-0.5",children:[a.jsxs("div",{className:"flex items-center justify-center gap-1 text-[9px] text-gray-400",children:[a.jsx(xe,{className:"w-2.5 h-2.5 text-blue-600 flex-shrink-0"}),a.jsx("span",{children:"4-10 categories"})]}),a.jsxs("div",{className:"flex items-center justify-center gap-1 text-[9px] text-gray-400",children:[a.jsx(xe,{className:"w-2.5 h-2.5 text-blue-600 flex-shrink-0"}),a.jsx("span",{children:"Advanced analytics"})]})]})]})]})]}),a.jsxs("div",{className:"group/card relative bg-gradient-to-b from-gray-800/50 to-gray-900/50 border-2 rounded-lg p-3 transition-all duration-300 overflow-hidden "+(j>10?"border-slate-600 shadow-lg shadow-slate-500/20":"border-gray-700/40 hover:border-slate-600/40"),children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900/0 to-slate-900/10 opacity-0 group-hover/card:opacity-100 transition-opacity"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-600 to-slate-700 rounded-lg flex items-center justify-center mx-auto mb-2 group-hover/card:shadow-lg group-hover/card:shadow-slate-600/30 transition-all",children:a.jsx(we,{className:"h-5 w-5 text-white"})}),a.jsx("h3",{className:"text-center font-bold text-base mb-0.5 "+(j>10?"text-slate-300":"text-white"),children:"Max"}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xl font-bold mb-0.5 "+(j>10?"text-white":"text-gray-400"),children:"$79"}),a.jsx("p",{className:"text-[10px] text-gray-500 mb-2",children:"per month"}),a.jsxs("div",{className:"space-y-0.5",children:[a.jsxs("div",{className:"flex items-center justify-center gap-1 text-[9px] text-gray-400",children:[a.jsx(xe,{className:"w-2.5 h-2.5 text-slate-600 flex-shrink-0"}),a.jsx("span",{children:"All 20 categories"})]}),a.jsxs("div",{className:"flex items-center justify-center gap-1 text-[9px] text-gray-400",children:[a.jsx(xe,{className:"w-2.5 h-2.5 text-slate-600 flex-shrink-0"}),a.jsx("span",{children:"Premium features"})]})]})]})]})]})]}),j>0&&a.jsx("div",{className:"relative p-4 rounded-xl border-2 transition-all duration-300 overflow-hidden "+("Core"===v?"border-orange-500 bg-orange-500/10":"Daily"===v?"border-blue-500 bg-blue-500/10":"border-slate-600 bg-slate-500/10"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[(C=v,"Core"===C?a.jsxs("div",{className:"relative",children:[a.jsx(pe,{className:"h-5 w-5"}),a.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-orange-400 rounded-full"})]}):"Daily"===C?a.jsxs("div",{className:"relative",children:[a.jsx(Ae,{className:"h-5 w-5"}),a.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-400 rounded-full"})]}):"Max"===C?a.jsxs("div",{className:"relative",children:[a.jsx(we,{className:"h-5 w-5"}),a.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-slate-400 rounded-full"})]}):null),a.jsxs("div",{children:[a.jsxs("div",{className:"font-bold text-base text-white",children:[v," Plan Selected"]}),a.jsxs("div",{className:"text-xs text-gray-300",children:[j," categories • $",(w/100).toFixed(0),"/month"]})]})]}),a.jsxs("button",{onClick:async()=>{if(0!==j){h(!0);try{const{data:{user:e}}=await c.auth.getUser();if(!e)return y("error","Please sign in to upgrade"),void h(!1);y("success",`Redirecting to pricing page for ${v} plan...`),setTimeout(()=>{window.location.hash="#/pricing"},1500)}catch(e){y("error","Failed to process upgrade. Please try again.")}finally{h(!1)}}else y("error","Please select at least one category to upgrade")},disabled:g,className:`flex items-center space-x-2 px-6 py-3 bg-gradient-to-r ${k(v)} text-white font-bold rounded-lg hover:opacity-90 transition-all transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed`,children:[a.jsx("span",{children:g?"Processing...":"Upgrade Now"}),!g&&a.jsx(D,{className:"h-4 w-4"})]})]})})]})]}),a.jsxs("section",{children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-3",children:"Select Your Health Categories"}),a.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Click on categories to add them to your plan. Each category includes multiple AI-powered services."})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:be.map(e=>{const s=ht[e.icon]||b,r=ut[e.id]||ut["critical-health"],l=t.has(e.id);return a.jsxs("button",{onClick:()=>f(e.id),className:"group/item relative bg-gradient-to-b from-gray-800/50 to-gray-900/50 border-2 rounded-xl p-5 transition-all duration-300 hover:scale-105 overflow-hidden "+(l?`${r.border} shadow-lg`:"border-gray-700/40 hover:border-gray-600/60"),children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-900/0 to-orange-900/5 opacity-0 group-hover/item:opacity-100 transition-opacity"}),l&&a.jsx("div",{className:"absolute top-3 right-3 w-7 h-7 bg-green-500 rounded-full flex items-center justify-center shadow-lg",children:a.jsx(p,{className:"h-4 w-4 text-white"})}),a.jsxs("div",{className:"relative flex flex-col items-center text-center space-y-3",children:[a.jsx("div",{className:`w-14 h-14 rounded-xl ${r.bg} border ${r.border} flex items-center justify-center group-hover/item:shadow-lg transition-all`,children:a.jsx(s,{className:`h-7 w-7 ${r.icon}`})}),a.jsxs("div",{children:[a.jsx("h4",{className:`font-bold text-sm mb-1 ${l?r.text:"text-gray-300"}`,children:e.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:[e.services.length," services"]})]})]})]},e.id)})})]}),j>0&&a.jsxs("section",{className:"bg-gradient-to-br from-gray-900 to-gray-800 border border-gray-800 rounded-2xl p-8",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Your Selected Categories"}),a.jsx("p",{className:"text-gray-400",children:"Review your selections before upgrading"})]}),a.jsx("div",{className:"px-4 py-2 bg-green-500/20 border border-green-500/30 rounded-lg",children:a.jsxs("span",{className:"text-green-400 font-bold",children:[j," selected"]})})]}),a.jsx("div",{className:"flex flex-wrap gap-3",children:Array.from(t).map(e=>{const t=be.find(t=>t.id===e);if(!t)return null;const s=ht[t.icon]||b,r=ut[e]||ut["critical-health"];return a.jsxs("div",{className:`group flex items-center space-x-3 pl-4 pr-3 py-3 rounded-full ${r.bg} border ${r.border} hover:shadow-lg transition-all`,children:[a.jsx(s,{className:`h-5 w-5 ${r.icon}`}),a.jsx("span",{className:`text-sm font-semibold ${r.text}`,children:t.name}),a.jsx("button",{onClick:()=>f(e),className:"ml-2 p-1.5 hover:bg-white/10 rounded-full transition-colors",children:a.jsx(N,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-300"})})]},e)})})]}),a.jsx("section",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 border border-gray-700/50 rounded-2xl p-8",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-500/20 border border-blue-500/30 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(K,{className:"h-6 w-6 text-blue-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Next Steps"}),a.jsx("p",{className:"text-gray-400 leading-relaxed",children:"After selecting your categories and upgrading your plan, you'll be guided to complete health questionnaires. These help our AI provide personalized insights tailored to your specific health goals."})]})]})})]});var C}function pt({onNavigate:t,onSignOut:s}){const[r,l]=H.useState("dashboard"),[n,i]=H.useState(!1),[o,d]=H.useState(!1),[x,m]=H.useState(!1);H.useEffect(()=>{g();"success"===new URLSearchParams(window.location.search).get("payment")&&(d(!0),l("catalog"),window.history.replaceState({},"",window.location.pathname),h())},[]);const g=async()=>{try{const{data:{user:e}}=await c.auth.getUser();if(!e)return;const{data:t}=await c.from("user_subscriptions").select("status").eq("user_id",e.id).in("status",["active","trialing"]).maybeSingle();m(!!t)}catch(e){}},h=async()=>{try{const{data:{user:t}}=await c.auth.getUser();if(!t)return;const{data:a}=await c.from("user_subscriptions").select("plan_id, billing_period").eq("user_id",t.id).in("status",["active","trial"]).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(a){const{sendEmail:s}=await e(async()=>{const{sendEmail:e}=await import("./emailProvider-DDN7Y-6p.js");return{sendEmail:e}},__vite__mapDeps([6,4,3]));await s({to:t.email,subject:"Welcome to BioMath Core! 🎉",html:`\n            <h1>Welcome to BioMath Core!</h1>\n            <p>Thank you for subscribing to our ${a.plan_id.toUpperCase()} plan!</p>\n            <p>You now have full access to all features of the BioMath Core platform.</p>\n            <p>Get started by exploring:</p>\n            <ul>\n              <li>📊 Your health dashboard</li>\n              <li>🤖 AI Health Assistant</li>\n              <li>📱 Device connectivity</li>\n              <li>📈 Comprehensive reports</li>\n            </ul>\n            <p>If you have any questions, our support team is here to help!</p>\n            <p>Best regards,<br/>The BioMath Core Team</p>\n          `})}}catch(t){}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 via-white to-gray-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950 transition-colors pt-16",children:[a.jsx(Te,{currentSection:r,onSectionChange:l,hasActiveSubscription:x}),a.jsx("div",{className:"ml-64 transition-all duration-300",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("button",{onClick:()=>t("home"),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900 border border-gray-300 dark:border-gray-700/50 hover:border-orange-600/50 text-gray-700 dark:text-gray-300 rounded-lg transition-all duration-300",children:[a.jsx(ee,{className:"h-5 w-5"}),a.jsx("span",{children:"Back to Home"})]}),a.jsxs("button",{onClick:async()=>{await c.auth.signOut(),s(),t("home")},className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900 border border-gray-300 dark:border-gray-700/50 hover:border-orange-600/50 text-gray-700 dark:text-gray-300 rounded-lg transition-all duration-300",children:[a.jsx(z,{className:"h-5 w-5"}),a.jsx("span",{children:"Sign Out"})]})]}),(()=>{switch(r){case"dashboard":default:return a.jsx(qe,{});case"ai-assistant":return a.jsx(et,{});case"devices":return a.jsx(at,{});case"support":return a.jsx(st,{});case"system":return a.jsx(xt,{});case"catalog":return x?a.jsx(bt,{onSectionChange:l}):a.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4",children:a.jsxs("div",{className:"bg-gradient-to-br from-orange-500/10 to-blue-500/10 border border-orange-500/30 rounded-2xl p-12 max-w-2xl",children:[a.jsx(O,{className:"w-16 h-16 text-orange-500 mx-auto mb-6"}),a.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Subscribe to Access Catalog"}),a.jsx("p",{className:"text-xl text-gray-300 mb-8",children:"Choose a subscription plan to unlock access to our comprehensive health services catalog with 20+ categories."}),a.jsx("button",{onClick:()=>t("pricing"),className:"px-8 py-4 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-semibold transition-all text-lg",children:"View Plans & Subscribe"})]})});case"questionnaires":return a.jsx(ze,{});case"reports":return a.jsx(gt,{});case"second-opinion":return a.jsx(dt,{});case"medical-files":return a.jsx(it,{});case"black-box":return a.jsx(ot,{});case"referral":return a.jsx(mt,{});case"billing":return a.jsx(ct,{});case"profile":return a.jsx(rt,{});case"settings":return a.jsx(Xe,{})}})()]})}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fadeIn",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full p-8 relative animate-slideUp",children:[a.jsx("button",{onClick:()=>d(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:a.jsx(N,{className:"h-6 w-6"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6",children:a.jsx(xe,{className:"h-12 w-12 text-green-600 dark:text-green-400"})}),a.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"🎉 Welcome to BioMath Core!"}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-6",children:"Thank you for your subscription! Your payment was successful."}),a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-6 mb-6 text-left",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"🎯 Next Step: Choose Your Health Categories"}),a.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-4",children:["Visit the ",a.jsx("strong",{children:"Catalog"})," to select health service categories based on your plan:"]}),a.jsxs("ul",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(xe,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Core Plan:"})," Choose up to 3 categories"]})]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(xe,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Daily Plan:"})," Choose up to 10 categories"]})]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(xe,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),a.jsxs("span",{children:[a.jsx("strong",{children:"Max Plan:"})," All 20 categories included!"]})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"A confirmation email has been sent to your inbox with all the details."}),a.jsx("button",{onClick:()=>{d(!1),l("catalog"),g()},className:"w-full px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white rounded-xl font-semibold transition-all transform hover:scale-105 shadow-lg",children:"Go to Catalog"})]})]})})]})}export{pt as default};
